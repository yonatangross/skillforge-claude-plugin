// OrchestKit Hooks - posttool bundle
// Generated: 2026-01-28T11:51:28.697Z

var x=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});function cr(t){return typeof t.command=="string"}function ur(t){return typeof t.file_path=="string"&&typeof t.content=="string"}function lr(t){return typeof t.file_path=="string"&&typeof t.old_string=="string"&&typeof t.new_string=="string"}function dr(t){return typeof t.file_path=="string"&&t.content===void 0}import{appendFileSync as st,existsSync as rt,statSync as ne,renameSync as se,mkdirSync as re,readSync as oe}from"node:fs";import{execSync as ie}from"node:child_process";function ot(){return process.env.CLAUDE_PLUGIN_ROOT?`${process.env.HOME||process.env.USERPROFILE||"/tmp"}/.claude/logs/ork`:`${p()}/.claude/logs`}function p(){return process.env.CLAUDE_PROJECT_DIR||"."}function T(){return process.env.CLAUDE_PLUGIN_ROOT||process.env.CLAUDE_PROJECT_DIR||"."}function f(){return process.env.CLAUDE_SESSION_ID||`fallback-${process.pid}-${Date.now()}`}function fr(t){if(process.env.ORCHESTKIT_BRANCH)return process.env.ORCHESTKIT_BRANCH;try{let e=ie("git branch --show-current",{cwd:t||p(),encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim();return process.env.ORCHESTKIT_BRANCH=e,e}catch{return"unknown"}}function ae(){return process.env.ORCHESTKIT_LOG_LEVEL||"warn"}function ce(t){let e=["debug","info","warn","error"];return e.indexOf(t)>=e.indexOf(ae())}function a(){return{continue:!0,suppressOutput:!0}}function hr(){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{permissionDecision:"allow"}}}function yr(t){return{continue:!1,stopReason:t,hookSpecificOutput:{permissionDecision:"deny",permissionDecisionReason:t}}}function kr(t){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"PostToolUse",additionalContext:t}}}function ue(t){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"UserPromptSubmit",additionalContext:t}}}function Sr(t,e){let n={continue:!0,hookSpecificOutput:{hookEventName:"PreToolUse",additionalContext:t,permissionDecision:"allow"}};return e?n.systemMessage=e:n.suppressOutput=!0,n}function _r(t){return{continue:!0,systemMessage:t}}function br(t){return{continue:!0,systemMessage:`\u26A0 ${t}`}}function xr(t){return{continue:!1,stopReason:t,hookSpecificOutput:{hookEventName:"PreToolUse",permissionDecision:"deny",permissionDecisionReason:t}}}var le=200*1024,de=100*1024;function it(t,e){if(rt(t))try{if(ne(t).size>e){let s=`${t}.old.${Date.now()}`;se(t,s)}}catch{}}function at(t){rt(t)||re(t,{recursive:!0})}function u(t,e,n="debug"){if(!ce(n))return;let s=ot(),r=`${s}/hooks.log`;try{at(s),it(r,le);let o=new Date().toISOString().replace("T"," ").slice(0,19);st(r,`[${o}] [${n.toUpperCase()}] [${t}] ${e}
`)}catch{}}function $r(t,e,n){let s=ot(),r=`${s}/permission-feedback.log`;try{at(s),it(r,de);let o=new Date().toISOString(),i=n?.tool_name||process.env.HOOK_TOOL_NAME||"unknown",c=n?.session_id||f();st(r,`${o} | ${t} | ${e} | tool=${i} | session=${c}
`)}catch{}}function V(t){if(!t)return 0;let s=(t.match(/[{};()=><]/g)||[]).length/t.length>.03?2.8:3.5;return Math.ceil(t.length/s)}function Er(t,e,n,s,r){let o=V(t);return s&&s.isOverBudget(n)?(u(e,`Budget exhausted for ${n}, suppressing ${o}t`),a()):(r&&r.trackTokenUsage(e,n,o),ue(t))}function Cr(){try{let t=[],n=Buffer.allocUnsafe(256),s,r=0;for(;;)try{if(s=oe(r,n,0,256,null),s===0)break;t.push(Buffer.from(n.subarray(0,s)))}catch{break}let o=Buffer.concat(t).toString("utf8").trim();return o?JSON.parse(o):{tool_name:"",session_id:f(),tool_input:{}}}catch{return{tool_name:"",session_id:f(),tool_input:{}}}}function g(t,e){let n=e.replace(/^\./,"").split("."),s=t;for(let r of n){if(s==null)return;s=s[r]}return s}function vr(t){return t.replace(/\\\s*[\r\n]+/g," ").replace(/\n/g," ").replace(/\s+/g," ").trim()}function Ir(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}import{execSync as v}from"node:child_process";function pe(t){let e=t||p();try{return v("git branch --show-current",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim()}catch{return"unknown"}}function ge(t){let e=t||pe();return["dev","main","master"].includes(e)}function Ar(t){let e=t||p();try{return v("git rev-parse --show-toplevel",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim()}catch{return e}}function Dr(t){let e=t||p();try{return v("git rev-parse --git-dir",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),!0}catch{return!1}}function me(t){let e=t||p();try{return v("git status --short",{cwd:e,encoding:"utf8",timeout:1e4,stdio:["pipe","pipe","pipe"]}).trim()}catch{return""}}function Or(t){return me(t).length>0}function Hr(t){let e=t||p();try{return v("git rev-parse --verify main",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),"main"}catch{try{return v("git rev-parse --verify master",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),"master"}catch{return"main"}}}function fe(t){let e=[/issue\/(\d+)/i,/feature\/(\d+)/i,/fix\/(\d+)/i,/bug\/(\d+)/i,/feat\/(\d+)/i,/^(\d+)-/,/-(\d+)$/,/#(\d+)/];for(let n of e){let s=t.match(n);if(s)return parseInt(s[1],10)}return null}function jr(t){if(ge(t))return null;let e=["issue/","feature/","fix/","bug/","feat/","chore/","docs/","refactor/","test/","ci/","perf/","style/","release/","hotfix/"];return e.some(s=>t.startsWith(s))?t.startsWith("issue/")&&!fe(t)?"issue/ branches should include an issue number (e.g., issue/123-description)":null:`Branch name should start with a valid prefix: ${e.join(", ")}`}import{appendFileSync as he,existsSync as ut,mkdirSync as ye,statSync as ke,renameSync as Se}from"node:fs";var ct="/tmp/claude-read-count";function A(t){let e=t.tool_name||"";if(["Read","Glob","Grep"].includes(e))try{let{readFileSync:r,writeFileSync:o}=x("node:fs"),i=0;try{i=parseInt(r(ct,"utf8").trim(),10)||0}catch{}if(i++,o(ct,String(i)),i%10!==0)return a()}catch{}let n=process.env.CLAUDE_PROJECT_DIR||".",s=`${n}/.claude/logs/audit.log`;try{let r=`${n}/.claude/logs`;ut(r)||ye(r,{recursive:!0}),_e(s,200*1024);let o=new Date().toISOString().replace("T"," ").slice(0,19),i="";switch(e){case"Bash":{i=(g(t,"tool_input.command")||"").substring(0,100);break}case"Write":case"Edit":{i=g(t,"tool_input.file_path")||"";break}case"Task":{i=g(t,"tool_input.subagent_type")||"";break}}let c=i?`[${o}] ${e} | ${i}
`:`[${o}] ${e}
`;he(s,c)}catch{}return a()}function _e(t,e){if(ut(t))try{if(ke(t).size>e){let s=`${t}.old.${Date.now()}`;Se(t,s)}}catch{}}import{existsSync as I,appendFileSync as be,readFileSync as R,writeFileSync as D,mkdirSync as pt,statSync as xe,renameSync as $e}from"node:fs";import{createHash as gt}from"node:crypto";var lt=/error:|Error:|ERROR|FATAL|exception|failed|denied|not found|does not exist|connection refused|timeout|ENOENT|EACCES|EPERM/i,Ee=/^(echo |ls |ls$|pwd|cat |head |tail |wc |date|whoami)/,dt=2e3,Ce=10,ve=3,Ie=1e3*1024;function we(t){let e=String(g(t,"tool_output")||t.tool_output||""),n=String(t.tool_error||g(t,"error")||""),s=t.exit_code??0,r=!1,o="",i="";if(s!==0&&s!==void 0&&(r=!0,o="exit_code",i=`Exit code: ${s}`),n&&(r=!0,o=o||"tool_error",i=i||n),lt.test(e)){r=!0,o=o||"output_pattern";let c=e.split(`
`).filter(l=>lt.test(l));i=i||c[0]||""}return{isError:r,errorType:o,errorMessage:i,errorText:n||e}}function Re(t){if(I(t))try{xe(t).size>Ie&&$e(t,`${t}.old.${Date.now()}`)}catch{}}function Te(t,e){let n=p(),s=`${n}/.claude/logs/errors.jsonl`,r="/tmp/claude-session-errors.json";try{pt(`${n}/.claude/logs`,{recursive:!0}),Re(s);let o=gt("md5").update(JSON.stringify(t.tool_input||{})).digest("hex"),i={timestamp:new Date().toISOString(),tool:t.tool_name,session_id:f(),error_type:e.errorType,error_message:e.errorMessage.substring(0,500),input_hash:o,tool_input:t.tool_input,output_preview:e.errorText.substring(0,1e3)};be(s,JSON.stringify(i)+`
`);try{let c={error_count:0,last_error_tool:"",last_error_time:""};I(r)&&(c=JSON.parse(R(r,"utf8"))),c.error_count=(c.error_count||0)+1,c.last_error_tool=t.tool_name||"",c.last_error_time=new Date().toISOString(),D(r,JSON.stringify(c,null,2))}catch{}u("unified-error-handler",`ERROR: ${t.tool_name} - ${e.errorType}`)}catch{u("unified-error-handler",`ERROR (fallback): ${t.tool_name}`)}}function Ae(t,e){if(!I(e))return null;try{let n=JSON.parse(R(e,"utf8")),s=t.toLowerCase();for(let r of n.patterns||[])if(r.regex)try{if(new RegExp(r.regex,"i").test(s))return r}catch{}}catch{}return null}function De(t,e,n){if(!I(n))try{pt(x("path").dirname(n),{recursive:!0}),D(n,JSON.stringify({suggestions:{},prompt_count:0}))}catch{return!0}try{let s=JSON.parse(R(n,"utf8")),r=gt("md5").update(`${t}|${e.substring(0,100)}`).digest("hex"),o=(s.prompt_count||0)+1;s.prompt_count=o;let i=s.suggestions[r]?.prompt_count||0;return i===0||o-i>=Ce?(s.suggestions[r]={pattern_id:t,prompt_count:o},D(n,JSON.stringify(s,null,2)),!0):(D(n,JSON.stringify(s,null,2)),!1)}catch{return!0}}function Oe(t,e){let n=`${e}/${t}/SKILL.md`;if(!I(n))return"";try{let r=R(n,"utf8").match(/^---\n([\s\S]*?)\n---/);if(r){let o=r[1].match(/description:\s*(.+)/);if(o)return o[1].trim()}}catch{}return""}function He(t,e,n){let s=t.solution?.brief||"An error was detected.",r=t.solution?.steps||[],o=`## Error Solution

`;o+=`**${s}**

`,r.length>0&&(o+=`### Quick Fixes

`,r.forEach((d,h)=>{o+=`  ${h+1}. ${d}
`}),o+=`
`);let i=t.skills||[],c=[];if(t.category&&I(e))try{c=JSON.parse(R(e,"utf8")).categories?.[t.category]?.related_skills||[]}catch{}let l=[...new Set([...i,...c])].slice(0,ve);if(l.length>0){o+=`### Related Skills

`;for(let d of l){let h=Oe(d,n);o+=h?`- **${d}**: ${h}
`:`- **${d}**
`}o+="\nUse `/ork:<skill-name>` or `Read skills/<skill-name>/SKILL.md`"}return o.length>dt?o.substring(0,dt-20)+`...

(truncated)`:o}function mt(t){let e=t.tool_name||"";if(e==="Bash"){let s=g(t,"tool_input.command")||"";if(Ee.test(s))return a()}let n=we(t);if(!n.isError)return a();if(Te(t,n),e==="Bash"){let s=T(),r=`${s}/.claude/rules/error_solutions.json`,o=`${s}/skills`,i=`/tmp/claude-error-suggestions-${f()}.json`,c=Ae(n.errorText.substring(0,2e3),r);if(c&&De(c.id,n.errorText,i)){let l=He(c,r,o);if(l)return u("unified-error-handler",`Suggesting solution for pattern: ${c.id}`),{continue:!0,hookSpecificOutput:{additionalContext:l}}}}return a()}import{existsSync as je}from"node:fs";import{execSync as w}from"node:child_process";function Ne(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"json":return"json";case"css":case"scss":return"css";default:return null}}function Y(t){try{return w(`which ${t}`,{stdio:"ignore"}),!0}catch{return!1}}function ft(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return a();let n=g(t,"tool_input.file_path")||"";if(!n||n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock"))return a();let s=process.env.CLAUDE_PROJECT_DIR||".",r=n.startsWith("/")?n:`${s}/${n}`;if(!je(r))return a();if(process.env.SKIP_AUTO_LINT==="1")return a();let o=Ne(n);if(!o)return a();let i=0,c=!1;try{switch(o){case"python":if(Y("ruff")){try{let l=w(`timeout 5s ruff check --output-format=concise "${r}" 2>&1`,{encoding:"utf8",stdio:["pipe","pipe","pipe"]});l&&(i=l.split(`
`).filter(Boolean).length,w(`timeout 5s ruff check --fix --unsafe-fixes=false "${r}" 2>/dev/null`,{stdio:"ignore"}),c=!0)}catch{}try{w(`timeout 5s ruff format "${r}" 2>/dev/null`,{stdio:"ignore"})}catch{}}break;case"typescript":case"javascript":if(Y("biome"))try{let l=w(`timeout 5s biome check --write "${r}" 2>&1`,{encoding:"utf8",stdio:["pipe","pipe","pipe"]});l.includes("Fixed")&&(c=!0),l.includes("error")&&(i=(l.match(/error/g)||[]).length)}catch{}break;case"json":case"css":if(Y("biome"))try{w(`timeout 5s biome format --write "${r}" 2>/dev/null`,{stdio:"ignore"}),c=!0}catch{}break}}catch(l){u("auto-lint",`Error: ${l}`)}if(c&&i>0){let l=n.split("/").pop();return{continue:!0,systemMessage:`Auto-lint: fixed issues, ${i} remaining in ${l}`}}return a()}import{existsSync as Q,readFileSync as tt,writeFileSync as H,mkdirSync as Pe}from"node:fs";var O=2200,ht=.7,Me=.5,Le=.1;function Fe(t){if(!Q(t))return 0;try{let e=tt(t,"utf8");return V(e)}catch{return 0}}function yt(){let e=`${p()}/context`,n=[`${e}/identity.json`,`${e}/session/state.json`,`${e}/knowledge/index.json`,`${e}/knowledge/blockers/current.json`],s=0;for(let r of n)s+=Fe(r);return s}function kt(){let t=parseInt(process.env.CLAUDE_MAX_CONTEXT||"200000",10);return Math.floor(t*(100-20)/100)}function Be(t){let e=kt();return e===0?!0:t/e>Le}function Ue(t,e){let s=`/tmp/claude-mcp-defer-state-${f()}.json`,r=kt(),o={mcp_deferred:t,context_tokens:e,effective_window:r,updated_at:new Date().toISOString(),reason:t?"context > 10% threshold":"context within limits"};try{H(s,JSON.stringify(o,null,2))}catch{}u("context-budget-monitor",`MCP defer state updated: defer=${t}, tokens=${e}, window=${r}`)}function ze(){let e=`${p()}/context/session/state.json`;if(Q(e))try{let n=JSON.parse(tt(e,"utf8")),s={session_id:n.session_id,started:n.started,current_task:n.current_task,next_steps:(n.next_steps||[]).slice(-3),blockers:n.blockers,_compressed:!0,_compressed_at:new Date().toISOString(),_original_files_touched:(n.files_touched||[]).length,_original_decisions:(n.decisions_this_session||[]).length};H(e,JSON.stringify(s,null,2)),u("context-budget-monitor","Session state compressed")}catch{}}function We(){let t=p(),e=`${t}/context/knowledge/decisions/active.json`;if(Q(e))try{let n=JSON.parse(tt(e,"utf8")),s=n.decisions||[];if(s.length>10){u("context-budget-monitor","Archiving old decisions (keeping latest 5)...");let r=`${t}/context/archive/decisions`;Pe(r,{recursive:!0});let o=new Date,i=`${r}/${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}.json`;H(i,JSON.stringify(s.slice(0,-5),null,2)),n.decisions=s.slice(-5),H(e,JSON.stringify(n,null,2)),u("context-budget-monitor",`Archived ${s.length-5} decisions to ${i}`)}}catch{}}function St(t){try{let e=yt(),n=e/O,s=Math.floor(n*100);u("context-budget-monitor",`Context usage: ${e} / ${O} tokens (${s}%)`);let r=Be(e);if(Ue(r,e),n>ht){u("context-budget-monitor",`WARNING: Context usage (${s}%) exceeds threshold (${ht*100}%)`),u("context-budget-monitor","Triggering compression..."),ze(),We();let o=yt(),i=o/O,c=Math.floor(i*100);u("context-budget-monitor",`After compression: ${o} / ${O} tokens (${c}%)`),i>Me?u("context-budget-monitor","WARNING: Still above target. Manual review recommended."):u("context-budget-monitor","Compression successful. Target achieved.")}else u("context-budget-monitor","Context usage within budget. No compression needed.")}catch(e){u("context-budget-monitor",`Error: ${e}`)}return a()}import{existsSync as _t,readFileSync as Je}from"node:fs";import{execSync as qe}from"node:child_process";function j(t){let e=p(),n=`${e}/.claude/coordination/lib/coordination.sh`;if(!_t(n))return a();try{let s=`${e}/.claude/.instance_env`,r=process.env.CLAUDE_SESSION_ID||`fallback-${process.pid}`;if(_t(s)){let i=Je(s,"utf8").match(/CLAUDE_INSTANCE_ID=["']?([^"'\n]+)/);i&&(r=i[1])}r&&qe(`source "${n}" && INSTANCE_ID="${r}" coord_heartbeat 2>/dev/null || true`,{shell:"/bin/bash",stdio:"ignore",timeout:5e3})}catch(s){u("coordination-heartbeat",`Heartbeat update failed: ${s}`)}return a()}function N(t){u("mem0-webhook-handler","Mem0 webhook handler starting");let e=t.tool_name||"",n=g(t,"tool_input.command")||"";if(e!=="Bash"||!n.includes("webhook-receiver.py"))return a();let s=g(t,"tool_result")||"";if(!s)return u("mem0-webhook-handler","No event data found in webhook call"),a();try{let r;try{r=JSON.parse(s)}catch{return u("mem0-webhook-handler","Could not parse event data"),a()}let o=r.result?.event_type||r.event_type||"",i=r.result?.memory_id||r.memory?.id||"";u("mem0-webhook-handler",`Processing webhook event: ${o} (memory: ${i})`),["memory.created","memory.updated","memory.deleted"].includes(o)?u("mem0-webhook-handler",`Received ${o} for memory ${i}`):u("mem0-webhook-handler",`Received unknown event type: ${o}`)}catch(r){u("mem0-webhook-handler",`Error processing webhook: ${r}`)}return a()}import{existsSync as Ge}from"node:fs";var Ze={Technology:/fastapi|react|typescript|python|postgres|redis|docker|kubernetes|langchain|langgraph|pgvector|qdrant|openai|anthropic|celery|rabbitmq|kafka|nginx|vite|tailwind|prisma|sqlalchemy|alembic|pydantic|zod/i,Pattern:/singleton|factory|repository|service|controller|adapter|facade|strategy|observer|decorator|middleware|dependency.injection|cursor.pagination|rate.limiting|circuit.breaker/i,Decision:/decided|chose|selected|will.use|adopted|standardized|migrated/i,Architecture:/microservice|monolith|event.driven|cqrs|event.sourcing|hexagonal|clean.architecture|ddd|api.gateway|load.balancer/i,Database:/postgresql|mysql|mongodb|sqlite|dynamodb|cassandra|schema|migration|index|query/i,Security:/jwt|oauth|cors|csrf|xss|sql.injection|rate.limit|encryption|authentication|authorization/i};function Ke(t){let e=t.toLowerCase(),n=[];for(let[s,r]of Object.entries(Ze)){let o=e.match(r);if(o)for(let i of[...new Set(o)].slice(0,5)){let c=i.split(/[\s-_]+/).map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join("-"),l="Used in project context";/decided.*/.test(e)&&e.includes(i)?l="Decided to use for project":/chose.*/.test(e)&&e.includes(i)?l="Chosen for implementation":/will.use.*/.test(e)&&e.includes(i)&&(l="Will be used in project"),n.push({name:c,entityType:s,observations:[l]})}}return n}function Xe(t,e){let n=t.toLowerCase(),s=[],r=e.map(o=>o.name);for(let o of r){let i=o.toLowerCase().replace(/-/g,".");for(let c of r){if(o===c)continue;let l=c.toLowerCase().replace(/-/g,".");new RegExp(`${i}.*(with|using|and|integrated|connected|for).*${l}`,"i").test(n)&&s.push({from:o,to:c,relationType:"uses"})}}return s}function P(t){switch(t.tool_name||""){case"mcp__mem0__add_memory":{u("memory-bridge","Processing mcp__mem0__add_memory - syncing to graph (primary)");let n=g(t,"tool_input.text")||"";if(!n||n.length<20)return u("memory-bridge","Memory text too short, skipping"),a();let r=`${T()}/bin/memory-fabric-agent.py`;Ge(r)&&u("memory-bridge","Memory Fabric Agent available for bidirectional sync");let i=Ke(n),c=i.length;if(c===0)return u("memory-bridge","No entities extracted"),a();let l=Xe(n,i),d=l.length;u("memory-bridge",`Extracted ${c} entities and ${d} relations`);let h=i.slice(0,5).map(y=>`- ${y.name} (${y.entityType}): ${y.observations[0]||"observed"}`).join(`
`),k=`[Memory Bridge] Sync to Graph (primary storage)

Mem0 content should be synced to the knowledge graph for durability.
Detected ${c} entities to preserve:

${h}

Store in graph with mcp__memory__create_entities:
\`\`\`json
{"entities": ${JSON.stringify(i)}}
\`\`\``;return d>0&&(k+=`

Then call mcp__memory__create_relations with:
\`\`\`json
{"relations": ${JSON.stringify(l)}}
\`\`\``),{continue:!0,systemMessage:k}}case"mcp__memory__create_entities":return u("memory-bridge","mcp__memory__create_entities - graph is primary, no sync needed"),a();default:return a()}}import{existsSync as Et,readFileSync as Ct,writeFileSync as vt,mkdirSync as Ve}from"node:fs";var Ye=/decided|chose|architecture|security|blocked|breaking|critical|must|cannot|deprecated|removed|migration/i,Qe=/pattern|convention|preference|style|format|naming/i,tn=30,en=85,nn=90;function sn(){let t=parseInt(process.env.CLAUDE_CONTEXT_USED_PERCENTAGE||"0",10);if(t===0){let e=parseInt(process.env.CLAUDE_CONTEXT_TOKENS_USED||"0",10),n=parseInt(process.env.CLAUDE_CONTEXT_MAX_TOKENS||"0",10);if(n>0)return Math.floor(e*100/n)}return t}function rn(t){return Ye.test(t)?"IMMEDIATE":Qe.test(t)?"BATCHED":"SESSION_END"}function bt(t){let e=[/[^.]*\b(decided|chose|selected|will use|must|cannot|blocked|breaking)[^.]*/i,/[^.]*\b(architecture|security|migration|deprecated)[^.]*/i];for(let s of e){let r=t.match(s);if(r)return r[0].trim().substring(0,300)}let n=t.match(/^[^.]{30,200}\./);return n?n[0].trim():t.substring(0,300).trim()}function xt(t){let e=t.toLowerCase();return/security|auth|jwt|oauth|cors|xss/.test(e)?"security":/architecture|design|structure|system/.test(e)?"architecture":/database|schema|migration|postgres|sql/.test(e)?"database":/blocked|issue|bug|problem|cannot/.test(e)?"blocker":/breaking|deprecated|removed|migration/.test(e)?"breaking-change":/api|endpoint|route|rest/.test(e)?"api":/decided|chose|selected/.test(e)?"decision":"general"}function on(t){if(!Et(t))try{Ve(x("path").dirname(t),{recursive:!0}),vt(t,JSON.stringify({pending:[],created_at:new Date().toISOString()}))}catch{}}function an(t,e,n){on(n);try{let s=JSON.parse(Ct(n,"utf8"));s.pending.push({content:t,category:e,queued_at:new Date().toISOString()}),vt(n,JSON.stringify(s,null,2)),u("realtime-sync",`Added to pending queue: category=${e}, length=${t.length}`)}catch{}}function $t(t){if(!Et(t))return 0;try{return JSON.parse(Ct(t,"utf8")).pending?.length||0}catch{return 0}}function M(t){let e=t.tool_name||"";if(!["Bash","Write","Edit","Skill","Task"].includes(e))return a();let n="";switch(e){case"Bash":{n=String(g(t,"tool_output")||t.tool_output||"");let l=g(t,"tool_input.command")||"";l&&(n=`${l}
${n}`);break}case"Write":case"Edit":{let l=g(t,"tool_input.new_string")||g(t,"tool_input.content")||"",d=g(t,"tool_input.file_path")||"";n=d?`Writing to ${d}: ${l}`:l;break}case"Skill":case"Task":{n=String(g(t,"tool_result")||t.tool_output||"");break}}if(!n||n.length<tn)return a();let s=rn(n);u("realtime-sync",`Tool: ${e}, Priority: ${s}, Content length: ${n.length}`);let r=sn(),o=p(),i=f(),c=`${o}/.claude/logs/.mem0-pending-sync-${i}.json`;if(s==="BATCHED"&&r>=en&&(s="IMMEDIATE",u("realtime-sync",`EMERGENCY: Context at ${r}%, upgrading BATCHED to IMMEDIATE`)),r>=nn){let l=$t(c);if(l>0)return u("realtime-sync",`CRITICAL: Context at ${r}%, flushing ${l} pending items`),{continue:!0,systemMessage:`[CRITICAL SYNC] Context at ${r}% - compaction imminent!

${l} items in pending queue need immediate sync to knowledge graph.
Pending sync file: ${c}

Execute mcp__memory__create_entities for each item in the pending file NOW
to preserve session context in the knowledge graph before compaction.`}}switch(s){case"IMMEDIATE":{let l=bt(n);if(!l||l.length<20)return u("realtime-sync","Could not extract meaningful decision"),a();let d=xt(l);return u("realtime-sync",`IMMEDIATE sync triggered: category=${d}`),{continue:!0,systemMessage:`[IMMEDIATE SYNC] Critical decision detected - store in knowledge graph now.

Category: ${d}
Decision: "${l.substring(0,200)}"

Store in knowledge graph with mcp__memory__create_entities:
\`\`\`json
{
  "entities": [{
    "name": "${d}-decision",
    "entityType": "Decision",
    "observations": ["${l.substring(0,300).replace(/"/g,'\\"')}"]
  }]
}
\`\`\`

This decision is critical and should be synced immediately for:
- Session continuity if interrupted
- Cross-agent knowledge sharing
- Future reference in similar contexts`}}case"BATCHED":{let l=bt(n);if(l&&l.length>=20){let d=xt(l);an(l,d,c);let h=$t(c);if(h>=5)return u("realtime-sync",`BATCHED queue has ${h} items - triggering batch sync`),{continue:!0,systemMessage:`[BATCHED SYNC] ${h} patterns/conventions queued for graph sync.

Latest: "${l.substring(0,100)}..." (${d})

These will be synced to knowledge graph at session end, or trigger batch sync now with mcp__memory__create_entities for each item in:
${c}`}}return a()}default:return a()}}import{existsSync as cn,readFileSync as un,writeFileSync as ln}from"node:fs";var L="/tmp/claude-session-metrics.json",go=`${L}.lock`;function F(t){let e=t.tool_name||"";if(!e)return a();try{let n={tools:{},errors:0,warnings:0};if(cn(L))try{let r=un(L,"utf8").trim();r&&(n=JSON.parse(r))}catch{n={tools:{},errors:0,warnings:0}}n.tools||(n.tools={});let s=n.tools[e]||0;n.tools[e]=s+1,ln(L,JSON.stringify(n,null,2))}catch(n){u("session-metrics",`Error updating metrics: ${n}`)}return a()}import{existsSync as dn,readFileSync as pn,appendFileSync as gn,mkdirSync as mn}from"node:fs";var fn=[{name:"add_pagination",regex:/limit.*offset|page.*size|cursor.*pagination|paginate|Paginated/i},{name:"add_rate_limiting",regex:/rate.?limit|throttl|RateLimiter|requests.?per/i},{name:"add_caching",regex:/@cache|cache_key|TTL|redis|memcache|@cached/i},{name:"add_retry_logic",regex:/retry|backoff|max_attempts|tenacity|Retry/i},{name:"add_error_handling",regex:/try.*catch|except|raise.*Exception|throw.*Error|error.*handler/i},{name:"add_validation",regex:/validate|Validator|@validate|Pydantic|Zod|yup|schema/i},{name:"add_logging",regex:/logger[.]|logging[.]|console[.]log|winston|pino|structlog/i},{name:"add_types",regex:/: *(str|int|bool|List|Dict|Optional)|interface |type .*=/i},{name:"add_type_guards",regex:/isinstance|typeof|is.*Type|assert.*type/i},{name:"add_docstring",regex:/docstring|"""[^"]+"""|\/\*\*/i},{name:"remove_comments",regex:/^-.*#|^-.*\/\/|^-.*\*/m},{name:"add_auth_check",regex:/@auth|@require_auth|isAuthenticated|requiresAuth|@login_required/i},{name:"add_input_sanitization",regex:/escape|sanitize|htmlspecialchars|DOMPurify/i},{name:"add_test_case",regex:/def test_|it\(|describe\(|expect\(|assert|@pytest/i},{name:"add_mock",regex:/Mock|patch|jest[.]mock|vi[.]mock|MagicMock/i},{name:"modify_imports",regex:/^[+-].*import|^[+-].*from.*import|^[+-].*require\(/m},{name:"add_async",regex:/async |await |Promise|asyncio|async def/i}];function hn(t){if(!dn(t))return"";try{let e=JSON.parse(pn(t,"utf8")),s=Math.floor(Date.now()/1e3)-300;return(e.recentSkills||[]).filter(o=>o.timestamp>s).sort((o,i)=>i.timestamp-o.timestamp)[0]?.skillId||""}catch{return""}}function yn(t){let e=[];for(let{name:n,regex:s}of fn)s.test(t)&&e.push(n);return e}function kn(t,e,n,s){let r=f(),i={timestamp:new Date().toISOString(),skill_id:t,file_path:e,session_id:r,patterns:n};try{mn(x("path").dirname(s),{recursive:!0}),gn(s,JSON.stringify(i)+`
`)}catch{}}function B(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return a();let n=g(t,"tool_input.file_path")||"";if(!n)return a();let s=p(),r=`${s}/.claude/session/state.json`,o=hn(r);if(!o)return a();let i="";if(e==="Edit"){let l=g(t,"tool_input.old_string")||"",d=g(t,"tool_input.new_string")||"";if(l&&d){let h=l.split(`
`),k=d.split(`
`);i=h.map(y=>`-${y}`).join(`
`)+`
`+k.map(y=>`+${y}`).join(`
`)}}else i=g(t,"tool_input.content")||"";if(!i)return a();let c=yn(i);if(c.length>0){let l=`${s}/.claude/feedback/edit-patterns.jsonl`;kn(o,n,c,l),process.env.CLAUDE_HOOK_DEBUG&&u("skill-edit-tracker",`Detected ${c.length} patterns for ${o}: ${JSON.stringify(c)}`)}return a()}import{existsSync as Tt,readFileSync as Sn,writeFileSync as _n,mkdirSync as bn}from"node:fs";import{createHash as xn}from"node:crypto";var It=500;var wt=15,Rt=3;function At(){return`${p()}/.claude/feedback/calibration-data.json`}function $n(){let t=`${p()}/.claude/feedback`;if(!Tt(t))try{bn(t,{recursive:!0})}catch{}}function En(){let t=At();if(Tt(t))try{return JSON.parse(Sn(t,"utf8"))}catch{u("calibration-engine","Failed to load calibration data, using defaults")}return{schemaVersion:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),records:[],adjustments:[],stats:{totalDispatches:0,successRate:0,avgConfidence:0,topAgents:[]}}}function Cn(t){$n();let e=At();t.updatedAt=new Date().toISOString();try{_n(e,JSON.stringify(t,null,2)),u("calibration-engine","Saved calibration data")}catch(n){u("calibration-engine",`Failed to save calibration data: ${n}`)}}function vn(t){return xn("sha256").update(t.toLowerCase().trim()).digest("hex").slice(0,16)}function Dt(t,e,n,s,r,o,i){let c=En(),l={timestamp:new Date().toISOString(),sessionId:f(),agent:e,promptHash:vn(t),matchedKeywords:n,dispatchConfidence:s,outcome:r,durationMs:o,feedback:i};c.records.push(l),c.records.length>It&&(c.records=c.records.slice(-It)),In(c,l),wn(c),Cn(c),u("calibration-engine",`Recorded outcome: ${e} -> ${r} (conf: ${s})`)}function In(t,e){let n=e.outcome==="success",s=e.outcome==="failure"||e.outcome==="rejected";if(!n&&!s)return;let r=n?Rt:-Rt;for(let o of e.matchedKeywords){let i=t.adjustments.find(c=>c.keyword===o&&c.agent===e.agent);i?(i.adjustment=Math.max(-wt,Math.min(wt,i.adjustment+r)),i.sampleCount++,i.lastUpdated=new Date().toISOString()):t.adjustments.push({keyword:o,agent:e.agent,adjustment:r,sampleCount:1,lastUpdated:new Date().toISOString()})}}function wn(t){let e=t.records;if(e.length===0)return;t.stats.totalDispatches=e.length;let n=e.filter(o=>o.outcome==="success").length;t.stats.successRate=n/e.length;let s=e.reduce((o,i)=>o+i.dispatchConfidence,0)/e.length;t.stats.avgConfidence=Math.round(s);let r=new Map;for(let o of e){let i=r.get(o.agent)||{count:0,success:0};i.count++,o.outcome==="success"&&i.success++,r.set(o.agent,i)}t.stats.topAgents=Array.from(r.entries()).map(([o,i])=>({agent:o,count:i.count,successRate:i.success/i.count})).sort((o,i)=>i.count-o.count).slice(0,10)}import{existsSync as Rn,readFileSync as Tn,writeFileSync as $o,mkdirSync as Eo}from"node:fs";function An(){let t=f();return`${p()}/.claude/orchestration/task-registry-${t}.json`}function Dn(){let t=An();if(Rn(t))try{return JSON.parse(Tn(t,"utf8"))}catch{}return{schemaVersion:"1.0.0",sessionId:f(),tasks:[],pipelines:[],updatedAt:new Date().toISOString()}}function Ot(t){return Dn().tasks.find(n=>n.taskId===t)}import{existsSync as jt,readFileSync as Nt,writeFileSync as wo,mkdirSync as Ro}from"node:fs";function On(){return`${p()}/.claude/orchestration`}function Hn(){let t=f();return`${On()}/session-${t}.json`}function jn(){return`${p()}/.claude/orchestration/config.json`}function Nn(){let t=Hn();if(jt(t))try{let e=Nt(t,"utf8");return JSON.parse(e)}catch(e){u("orchestration-state",`Failed to load state: ${e}`)}return{sessionId:f(),activeAgents:[],injectedSkills:[],promptHistory:[],maxHistorySize:10,updatedAt:new Date().toISOString()}}function Pt(){return Nn().lastClassification}var Ht={enableAutoDispatch:!0,enableSkillInjection:!0,maxSkillInjectionTokens:800,enableCalibration:!0,enablePipelines:!0,maxRetries:3,retryDelayBaseMs:1e3};function Mt(){let t=jn();if(jt(t))try{let e=Nt(t,"utf8");return{...Ht,...JSON.parse(e)}}catch{}return Ht}function Pn(t){let e=t.tool_input||{};return typeof e.taskId=="string"?e.taskId:null}function Mn(t){return t.tool_name!=="TaskUpdate"?!1:typeof(t.tool_input||{}).status=="string"}function Ln(t){switch(t){case"completed":return"success";case"pending":return null;default:return null}}function U(t){if(!Mn(t))return a();if(!Mt().enableCalibration)return a();let n=t.tool_input||{},s=Pn(t),r=n.status;if(!s)return a();let o=Ln(r);if(!o)return a();u("calibration-tracker",`Tracking task ${s} status update to ${r}`);let i=Ot(s);if(!i)return u("calibration-tracker",`Task ${s} not found in registry`),a();let c=i.agent;if(!c)return u("calibration-tracker",`No agent associated with task ${s}`),a();let d=Pt()?.agents.find(C=>C.agent===c),h=d?.matchedKeywords||[],k=i.confidence||d?.confidence||0,y=i.createdAt?Date.now()-new Date(i.createdAt).getTime():void 0;return Dt("",c,h,k,o,y),u("calibration-tracker",`Recorded calibration: ${c} -> ${o} (conf: ${k})`),a()}import{existsSync as Fn,readFileSync as Bn,writeFileSync as Lt,mkdirSync as Un}from"node:fs";var zn={JWT:/jwt|jsonwebtoken/i,OAuth2:/oauth|oauth2/i,PostgreSQL:/postgres|postgresql|psql/i,Redis:/redis/i,React:/react/i,FastAPI:/fastapi/i,SQLAlchemy:/sqlalchemy/i,Alembic:/alembic/i,"cursor-pagination":/cursor.based|keyset/i,"offset-pagination":/offset.pagination/i,WebSocket:/websocket/i,SSE:/sse|server.sent/i,GraphQL:/graphql/i,REST:/rest.api|restful/i},Wn={feature:/^feat:|^feature:/i,bugfix:/^fix:|^bugfix:/i,refactor:/^refactor:/i,optimization:/^perf:|^performance:/i,security:/^security:|^sec:/i,testing:/^test:|^tests:/i},Jn={pagination:/cursor|pagination|offset|limit|page/i,caching:/cache|redis|memcache|ttl/i,authentication:/auth|jwt|oauth|token|login/i,validation:/validate|validation|schema|pydantic|zod/i,testing:/test|spec|coverage|mock/i,security:/security|encrypt|hash|secret|credential/i,performance:/performance|optimize|cache|index/i,error_handling:/error|exception|retry|fallback/i};function qn(){return p().split("/").pop()||"unknown"}function Gn(t){let e=t.toLowerCase(),n="unknown",s="general";for(let[r,o]of Object.entries(zn))if(o.test(e)){n=r;break}for(let[r,o]of Object.entries(Wn))if(o.test(t)){s=r;break}return{tech:n,pattern:s}}function Zn(t){for(let[e,n]of Object.entries(Jn))if(n.test(t))return e;return"general"}function z(t,e,n,s,r){let o=new Date().toISOString(),i=qn();if(!Fn(r))try{Un(x("path").dirname(r),{recursive:!0}),Lt(r,JSON.stringify({patterns:[]}))}catch{return}try{let c=JSON.parse(Bn(r,"utf8"));c.patterns.push({text:t,category:e,outcome:n,source:s,timestamp:o,project:i}),Lt(r,JSON.stringify(c,null,2)),u("pattern-extractor",`Queued pattern: category=${e} outcome=${n} source=${s}`)}catch{}}function Kn(t,e,n){let s="",r=t.match(/-m\s+["']([^"']+)["']/)||t.match(/-m\s+([^\s]+)/);if(r&&(s=r[1]),!s)return;let{tech:o,pattern:i}=Gn(s),c=Zn(s),l=e===0?"success":"failed",d=s;o!=="unknown"&&(d=`[${o}] ${s}`),z(d,c,l,"commit",n)}function Xn(t,e,n){if(e!==0)return;let s="PR merged successfully",r=t.match(/gh\s+pr\s+merge\s+(\d+)/);r&&(s=`PR #${r[1]} merged`),z(s,"decision","success","pr-merge",n)}function Vn(t,e,n){let s="unknown";/pytest|py\.test/.test(t)?s="pytest":/jest/.test(t)?s="jest":/vitest/.test(t)?s="vitest":/npm\s+test|yarn\s+test|bun\s+test/.test(t)?s="npm-test":/go\s+test/.test(t)&&(s="go-test");let r=e===0?"success":"failed",o=`Tests ${r==="success"?"passed":"failed"} (${s})`;z(o,"testing",r,"test-run",n)}function Yn(t,e,n){let s="unknown";/npm\s+run\s+build/.test(t)?s="npm":/yarn\s+build/.test(t)?s="yarn":/cargo\s+build/.test(t)?s="cargo":/make/.test(t)?s="make":/docker\s+build/.test(t)&&(s="docker");let r=e===0?"success":"failed",o=`Build ${r==="success"?"succeeded":"failed"} (${s})`;z(o,"build",r,"build",n)}function W(t){if((t.tool_name||"")!=="Bash")return a();let n=g(t,"tool_input.command")||"",s=t.exit_code??0;if(!n)return a();let r=n.toLowerCase(),i=`${p()}/.claude/feedback/patterns-queue.json`;return/git\s+commit/.test(r)?Kn(n,s,i):/gh\s+pr\s+merge/.test(r)?Xn(n,s,i):/pytest|jest|vitest|npm\s+test|yarn\s+test|bun\s+test|go\s+test/.test(r)?Vn(n,s,i):/npm\s+run\s+build|yarn\s+build|cargo\s+build|make|docker\s+build/.test(r)&&Yn(n,s,i),a()}import{existsSync as Bt,readFileSync as Ut,writeFileSync as Qn,mkdirSync as ts}from"node:fs";var es=["py","ts","tsx","js","jsx","go","rs","java"];function ns(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"go":return"go";case"rs":return"rust";case"java":return"java";default:return null}}function ss(t){let e=0,n=0,s=0;for(let r of t.split(`
`))r.startsWith("	")?e++:r.startsWith("    ")?s++:r.match(/^  [^ ]/)&&n++;return e>n+s?{style:"tabs",size:1}:n>s?{style:"spaces",size:2}:s>0?{style:"spaces",size:4}:{style:"unknown",size:4}}function rs(t){let e=(t.match(/'/g)||[]).length,n=(t.match(/"/g)||[]).length;return e>n?"single":"double"}function os(t){let e=0,n=0;for(let s of t.split(`
`)){let r=s.trim();!r||r.startsWith("//")||r.startsWith("*")||(/;\s*$/.test(s)?e++:/[a-zA-Z0-9\)\]\'\"]\\s*$/.test(s)&&n++)}return e>n?"always":"omit"}function Ft(t){return(t.match(/,\s*$/gm)||[]).length>5?"always":"minimal"}function is(t){let e=/\) -> |: [A-Z][a-zA-Z]+(\[|$| =)/.test(t),n="unknown";return/"""[^"]+"""/.test(t)&&(/:param |:returns:|:raises:/.test(t)?n="sphinx":/Args:|Returns:|Raises:/.test(t)?n="google":/Parameters|Returns\n-+/.test(t)?n="numpy":n="simple"),{typeHints:e,docstringStyle:n}}function as(t){if(Bt(t))try{return JSON.parse(Ut(t,"utf8"))}catch{}return{version:"1.0.0",last_updated:null,samples_count:0,languages:{},global_preferences:{indentation:{style:"unknown",size:4,confidence:0},quotes:{style:"unknown",confidence:0}}}}function cs(t,e,n,s,r,o,i,c){t.last_updated=new Date().toISOString(),t.samples_count++,t.languages[e]||(t.languages[e]={samples:0,indentation:{tabs:0,spaces_2:0,spaces_4:0},quotes:{single:0,double:0},semicolons:{always:0,omit:0},trailing_comma:{always:0,minimal:0},type_hints:{used:0,not_used:0},docstring_style:{}});let l=t.languages[e];l.samples++,n.style==="tabs"?l.indentation.tabs++:n.size===2?l.indentation.spaces_2++:l.indentation.spaces_4++,s==="single"?l.quotes.single++:l.quotes.double++,r!=="unknown"&&(r==="always"?l.semicolons.always++:l.semicolons.omit++),o!=="unknown"&&(o==="always"?l.trailing_comma.always++:l.trailing_comma.minimal++),i!==null&&(i?l.type_hints.used++:l.type_hints.not_used++),c!=="unknown"&&(l.docstring_style[c]=(l.docstring_style[c]||0)+1)}function J(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return a();let n=g(t,"tool_input.file_path")||"";if(!n||n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock"))return a();let s=n.split(".").pop()?.toLowerCase()||"";if(!es.includes(s))return a();let r=ns(n);if(!r)return a();let o=g(t,"tool_input.content")||"";if(!o){let m=p(),S=n.startsWith("/")?n:`${m}/${n}`;if(Bt(S))try{o=Ut(S,"utf8").split(`
`).slice(0,100).join(`
`)}catch{return a()}}if(!o)return a();let i=ss(o),c=rs(o),l="unknown",d="unknown",h=null,k="unknown";switch(r){case"javascript":case"typescript":l=os(o),d=Ft(o);break;case"python":{let m=is(o);h=m.typeHints,k=m.docstringStyle,d=Ft(o);break}}let y=p(),C=`${y}/.claude/feedback/code-style-profile.json`;try{ts(`${y}/.claude/feedback`,{recursive:!0});let m=as(C);cs(m,r,i,c,l,d,h,k),Qn(C,JSON.stringify(m,null,2))}catch(m){u("code-style-learner",`Error updating profile: ${m}`)}return u("code-style-learner",`Analyzed ${r} file: indent=${i.style}(${i.size}) quotes=${c}`),a()}import{existsSync as zt,readFileSync as Wt,writeFileSync as us,mkdirSync as ls}from"node:fs";var ds=["py","ts","tsx","js","jsx","go","rs","java"];function ps(t){return t.length<2||/^[_0-9]+$/.test(t)?"unknown":/^[A-Z][A-Z0-9_]*$/.test(t)?"SCREAMING_SNAKE_CASE":/^[A-Z][a-zA-Z0-9]*$/.test(t)?"PascalCase":/^[a-z][a-zA-Z0-9]*$/.test(t)&&!t.includes("_")?"camelCase":/^[a-z][a-z0-9_]*$/.test(t)?"snake_case":/^_[a-z][a-z0-9_]*$/.test(t)?"private_snake_case":/^__[a-z][a-z0-9_]*__$/.test(t)?"dunder":"mixed"}function gs(t){let e=(t.match(/def ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(o=>o.replace("def ","")),n=(t.match(/class ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(o=>o.replace("class ","")),s=(t.match(/^\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*=/gm)||[]).map(o=>o.replace(/\s*=.*/,"").trim()),r=(t.match(/^([A-Z][A-Z0-9_]*)\s*=/gm)||[]).map(o=>o.replace(/\s*=.*/,"").trim());return{functions:e,classes:n,variables:s,constants:r}}function ms(t){let e=[...(t.match(/(function|async function) ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace(/(async )?function /,"")),...(t.match(/const ([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*\(/g)||[]).map(i=>i.replace(/const /,"").replace(/\s*=.*/,""))],n=(t.match(/class ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("class ","")),s=(t.match(/interface ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("interface ","")),r=(t.match(/type ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("type ","")),o=(t.match(/(const|let|var) ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace(/(const|let|var) /,""));return{functions:e,classes:n,variables:o,interfaces:s,types:r}}function b(t){let e={camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0};for(let n of t){if(!n)continue;let s=ps(n);e[s]++}return e}function fs(t){let n=(t.split("/").pop()||"").replace(/\.[^.]+$/,"");return/^[a-z][a-z0-9_]*$/.test(n)?"snake_case":/^[a-z][a-z0-9-]*$/.test(n)?"kebab-case":/^[A-Z][a-zA-Z0-9]*$/.test(n)?"PascalCase":/^[a-z][a-zA-Z0-9]*$/.test(n)?"camelCase":"mixed"}function hs(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"go":return"go";case"rs":return"rust";case"java":return"java";default:return null}}function ys(t){if(zt(t))try{return JSON.parse(Wt(t,"utf8"))}catch{}return{version:"1.0.0",last_updated:null,samples_count:0,languages:{},file_naming:{},detected_patterns:{functions:{},classes:{},variables:{},constants:{},types:{}}}}function ks(){return{samples:0,functions:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},classes:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},variables:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},constants:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},types:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0}}}function q(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return a();let n=g(t,"tool_input.file_path")||"";if(!n||n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock"))return a();let s=n.split(".").pop()?.toLowerCase()||"";if(!ds.includes(s))return a();let r=hs(n);if(!r)return a();let o=g(t,"tool_input.content")||"";if(!o){let m=p(),S=n.startsWith("/")?n:`${m}/${n}`;if(zt(S))try{o=Wt(S,"utf8").split(`
`).slice(0,150).join(`
`)}catch{return a()}}if(!o)return a();let i=fs(n),c=b([]),l=b([]),d=b([]),h=b([]),k=b([]);switch(r){case"python":{let m=gs(o);c=b(m.functions),l=b(m.classes),d=b(m.variables),h=b(m.constants);break}case"typescript":case"javascript":{let m=ms(o);c=b(m.functions),l=b(m.classes),d=b(m.variables),k=b([...m.interfaces,...m.types]);break}}let y=p(),C=`${y}/.claude/feedback/naming-conventions.json`;try{ls(`${y}/.claude/feedback`,{recursive:!0});let m=ys(C);m.last_updated=new Date().toISOString(),m.samples_count++,m.file_naming[i]=(m.file_naming[i]||0)+1,m.languages[r]||(m.languages[r]=ks());let S=m.languages[r];S.samples++;for(let _ of Object.keys(c))S.functions[_]=(S.functions[_]||0)+c[_],S.classes[_]=(S.classes[_]||0)+l[_],S.variables[_]=(S.variables[_]||0)+d[_],S.constants[_]=(S.constants[_]||0)+h[_],S.types[_]=(S.types[_]||0)+k[_];us(C,JSON.stringify(m,null,2))}catch(m){u("naming-convention-learner",`Error updating profile: ${m}`)}return u("naming-convention-learner",`Analyzed ${r} file (${n}): file=${i}`),a()}import{existsSync as Ss,readFileSync as _s,writeFileSync as Jt,mkdirSync as bs}from"node:fs";var xs={"api-design-framework|fastapi-advanced":"Both relate to API design. Consider using api-design-framework for patterns, fastapi-advanced for implementation.","sqlalchemy-2-async|database-schema-designer":"Both relate to database. Use database-schema-designer for schema design, sqlalchemy-2-async for async patterns.","caching-strategies|performance-optimization":"Both optimize performance. Consider consolidating caching queries.","auth-patterns|owasp-top-10":"Both relate to security. auth-patterns for implementation, owasp-top-10 for validation.","asyncio-advanced|connection-pooling":"Both relate to async. asyncio-advanced for patterns, connection-pooling for specific optimization."};function $s(t){if(!Ss(t))try{bs(x("path").dirname(t),{recursive:!0}),Jt(t,JSON.stringify({version:"1.0",skills:{},sessions:{},last_updated:""}))}catch{}}function G(t){$s(t);try{return JSON.parse(_s(t,"utf8"))}catch{return{version:"1.0",skills:{},sessions:{},last_updated:""}}}function Es(t,e,n){let s=G(n),r=new Date().toISOString();s.skills[t]=(s.skills[t]||0)+1,s.sessions[e]||(s.sessions[e]=[]),s.sessions[e].includes(t)||s.sessions[e].push(t),s.last_updated=r;try{Jt(n,JSON.stringify(s,null,2)),u("skill-usage-optimizer",`Updated usage for skill: ${t} (session: ${e})`)}catch{}}function Cs(t,e){return G(e).sessions[t]||[]}function vs(t,e){for(let[n,s]of Object.entries(xs)){let[r,o]=n.split("|");if(t===r||t===o){let i=t===r?o:r;if(e.includes(i))return u("skill-usage-optimizer",`Overlap detected: ${r} + ${o}`),s}}return null}function Is(t){let e=G(t),n=Object.entries(e.skills);return n.length===0?"":n.sort((s,r)=>r[1]-s[1]).slice(0,3).map(([s,r])=>`${s}:${r}`).join(", ")}function Z(t){let e=t.tool_name||"",n=g(t,"tool_input.skill")||g(t,"tool_name")||"";if(e!=="Skill"&&!n?.startsWith("skills/")&&!n)return a();if(!n)return a();let r=`${p()}/.claude/feedback/skill-usage.json`,o=f();Es(n,o,r);let i=Cs(o,r),c=vs(n,i),l=Is(r),d="";c&&(d=`Skill overlap: ${c}`,u("skill-usage-optimizer",`Suggesting consolidation for: ${n}`));let k=G(r).skills[n]||0;return k>0&&k%5===0&&l&&(d?d=`${d} | Top skills: ${l}`:d=`Top skills this project: ${l}`),d?(d.length>200&&(d=d.substring(0,197)+"..."),{continue:!0,hookSpecificOutput:{additionalContext:d}}):a()}import{existsSync as ws,readFileSync as Rs,writeFileSync as qt,mkdirSync as Ts}from"node:fs";import{execSync as $}from"node:child_process";function As(t){let e=t.match(/^(issue|fix|feature|bug|feat)\/(\d+)/);return e?e[2]:(e=t.match(/^(\d+)-/),e?e[1]:null)}function Ds(t){let e=t.match(/#(\d+)/);return e?e[1]:(e=t.match(/(fix|fixes|close|closes|resolve|resolves)\s+#?(\d+)/i),e?e[2]:null)}function Os(){try{return $("git branch --show-current 2>/dev/null || git rev-parse --abbrev-ref HEAD 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()}catch{return""}}function Hs(){try{let t=$("git rev-parse --short HEAD 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),e=$("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),n=$("git log -1 --pretty=%cI 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()||new Date().toISOString();return{sha:t,message:e,timestamp:n}}catch{return null}}function js(t,e){if(!ws(t))try{Ts(x("path").dirname(t),{recursive:!0}),qt(t,JSON.stringify({session_id:e,issues:{}}))}catch{}}function Ns(t,e,n,s,r){js(s,r);try{let o=JSON.parse(Rs(s,"utf8"));return o.issues[t]||(o.issues[t]={commits:[],tasks_completed:[],pr_url:null,branch:n}),o.issues[t].commits.push(e),o.issues[t].branch=n,qt(s,JSON.stringify(o,null,2)),u("issue-progress-commenter",`Queued commit for issue #${t}`),!0}catch{return u("issue-progress-commenter",`Error queuing commit for issue #${t}`),!1}}function K(t){if((t.tool_name||"")!=="Bash")return a();let n=g(t,"tool_input.command")||"",s=t.exit_code??0;if(!/git\s+commit/i.test(n)||s!==0)return a();u("issue-progress-commenter","Processing git commit command...");try{$("which gh",{stdio:"ignore",timeout:2e3})}catch{return u("issue-progress-commenter","gh CLI not available, skipping issue progress tracking"),a()}try{if(!$("git remote get-url origin 2>/dev/null",{encoding:"utf8",timeout:5e3}).includes("github"))return u("issue-progress-commenter","Not a GitHub repository, skipping"),a()}catch{return a()}let r=Os();if(!r)return u("issue-progress-commenter","Could not determine current branch"),a();let o=As(r);if(!o)try{let d=$("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim();o=Ds(d)}catch{}if(!o)return u("issue-progress-commenter",`No issue number found in branch '${r}' or commit message`),a();u("issue-progress-commenter",`Found issue #${o}`);try{$(`gh issue view ${o} --json number`,{stdio:"ignore",timeout:5e3})}catch{return u("issue-progress-commenter",`Issue #${o} not found or not accessible`),a()}let i=Hs();if(!i)return u("issue-progress-commenter","Could not get commit info"),a();let c=(t.session_id||f()).replace(/[^a-zA-Z0-9_-]/g,""),l=`/tmp/claude-session-${c}/issue-progress.json`;return Ns(o,i,r,l,c),a()}import{existsSync as Ps,readFileSync as Ms,writeFileSync as Ls}from"node:fs";import{execSync as E}from"node:child_process";function Fs(t){let e=t.replace(/^[a-z]+(\([^)]*\))?:\s*/i,"");return e=e.replace(/\(#\d+\)/g,""),e.trim()}function Gt(t){return t.toLowerCase().replace(/\s+/g," ").trim()}function Bs(t,e){let n=Gt(t),s=Gt(e);if(n===s||n.includes(s)||s.includes(n))return!0;let r=new Set(n.split(" ").filter(c=>c.length>=3)),o=s.split(" ").filter(c=>c.length>=3),i=0;for(let c of o)r.has(c)&&i++;return i>=2}function Us(t){let e=t.match(/^(issue|fix|feature|bug|feat)\/(\d+)/);return e?e[2]:(e=t.match(/^(\d+)-/),e?e[1]:null)}function zs(t){let e=t.match(/#(\d+)/);return e?e[1]:null}function Ws(t){try{let n=E(`gh issue view ${t} --json body -q '.body' 2>/dev/null`,{encoding:"utf8",timeout:1e4}).split(`
`),s=[];for(let r of n){let o=r.match(/^\s*-\s*\[\s*\]\s+(.+)/);o&&s.push(o[1].trim())}return s}catch{return[]}}function Js(t,e){u("issue-subtask-updater",`Attempting to update checkbox: '${e}' in issue #${t}`);try{let n=E(`gh issue view ${t} --json body -q '.body' 2>/dev/null`,{encoding:"utf8",timeout:1e4}),s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=n.replace(new RegExp(`(^\\s*-\\s*)\\[\\s*\\](\\s+${s})`,"m"),"$1[x]$2");if(n===r)return u("issue-subtask-updater",`No change needed for checkbox: '${e}'`),!1;let o=E("gh repo view --json nameWithOwner -q '.nameWithOwner' 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),i=JSON.stringify(r);return E(`gh api -X PATCH "repos/${o}/issues/${t}" -f body=${i}`,{stdio:"ignore",timeout:1e4}),u("issue-subtask-updater",`Successfully updated checkbox: '${e}'`),!0}catch(n){return u("issue-subtask-updater",`Failed to update issue body: ${n}`),!1}}function qs(t,e,n){if(Ps(n))try{let s=JSON.parse(Ms(n,"utf8"));s.issues[t]||(s.issues[t]={commits:[],tasks_completed:[],pr_url:null}),s.issues[t].tasks_completed.includes(e)||(s.issues[t].tasks_completed.push(e),Ls(n,JSON.stringify(s,null,2)))}catch{}}function X(t){if((t.tool_name||"")!=="Bash")return a();let n=g(t,"tool_input.command")||"",s=t.exit_code??0;if(!/git\s+commit/i.test(n)||s!==0)return a();u("issue-subtask-updater","Processing git commit for subtask updates...");try{E("which gh",{stdio:"ignore",timeout:2e3})}catch{return u("issue-subtask-updater","gh CLI not available, skipping subtask updates"),a()}try{if(!E("git remote get-url origin 2>/dev/null",{encoding:"utf8",timeout:5e3}).includes("github"))return u("issue-subtask-updater","Not a GitHub repository, skipping"),a()}catch{return a()}let r="",o="";try{r=E("git branch --show-current 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),o=E("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()}catch{return a()}let i=Us(r);if(i||(i=zs(o)),!i)return u("issue-subtask-updater","No issue number found"),a();u("issue-subtask-updater",`Found issue #${i}, checking for matching subtasks...`);let c=Fs(o);if(!c)return u("issue-subtask-updater","Could not extract task from commit message"),a();u("issue-subtask-updater",`Commit task: '${c}'`);let l=Ws(i);if(l.length===0)return u("issue-subtask-updater",`No unchecked tasks in issue #${i}`),a();let d=!1,k=`/tmp/claude-session-${(t.session_id||f()).replace(/[^a-zA-Z0-9_-]/g,"")}/issue-progress.json`;for(let y of l)Bs(c,y)&&(u("issue-subtask-updater",`Found matching checkbox: '${y}'`),Js(i,y)&&(qs(i,y,k),d=!0));return d?{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"PostToolUse",additionalContext:`Issue #${i}: Automatically marked sub-task as complete based on commit.`}}:(u("issue-subtask-updater",`No matching checkboxes found for task: '${c}'`),a())}var Gs=[{name:"session-metrics",fn:F,matcher:"*"},{name:"audit-logger",fn:A,matcher:"*"},{name:"calibration-tracker",fn:U,matcher:"*"},{name:"pattern-extractor",fn:W,matcher:"Bash"},{name:"issue-progress-commenter",fn:K,matcher:"Bash"},{name:"issue-subtask-updater",fn:X,matcher:"Bash"},{name:"mem0-webhook-handler",fn:N,matcher:"Bash"},{name:"code-style-learner",fn:J,matcher:["Write","Edit"]},{name:"naming-convention-learner",fn:q,matcher:["Write","Edit"]},{name:"skill-edit-tracker",fn:B,matcher:["Write","Edit"]},{name:"coordination-heartbeat",fn:j,matcher:"Task"},{name:"skill-usage-optimizer",fn:Z,matcher:"Skill"},{name:"memory-bridge",fn:P,matcher:["mcp__mem0__add_memory","mcp__memory__create_entities"]},{name:"realtime-sync",fn:M,matcher:["Bash","Write","Edit","Skill","Task"]}];function Zs(t,e){return e==="*"?!0:Array.isArray(e)?e.includes(t):t===e}async function Zt(t){let e=t.tool_name||"",n=Gs.filter(o=>Zs(e,o.matcher));if(n.length===0)return a();let s=await Promise.allSettled(n.map(async o=>{try{let i=o.fn(t);return i instanceof Promise&&await i,{hook:o.name,status:"success"}}catch(i){let c=i instanceof Error?i.message:String(i);return u("unified-dispatcher",`${o.name} failed: ${c}`),{hook:o.name,status:"error",message:c}}})),r=[];for(let o of s)o.status==="rejected"?r.push("unknown"):o.value.status==="error"&&r.push(o.value.hook);return r.length>0&&u("posttool-dispatcher",`${r.length}/${n.length} hooks failed: ${r.join(", ")}`),a()}import{appendFileSync as Kt,mkdirSync as Ks}from"node:fs";import{execSync as Xs}from"node:child_process";function Xt(t){if((t.tool_name||"")!=="Write")return a();let n=g(t,"tool_input.file_path")||process.env.TOOL_OUTPUT_FILE_PATH||"";if(!n)return a();if(n.includes("test")||n.includes("spec")||n.includes("__tests__"))return a();if(!/\.(py|ts|tsx|js|jsx)$/.test(n))return a();let s=p(),r="",o=n.split("/").pop()||"";if(n.endsWith(".py"))r=`test_${o.replace(".py","")}.py`;else if(/\.(ts|tsx|js|jsx)$/.test(n))r=`${o.replace(/\.[^.]+$/,"")}.test.*`;else return a();let i="";try{i=Xs(`find "${s}" -type f -name "${r}" 2>/dev/null | head -1`,{encoding:"utf8",timeout:5e3}).trim()}catch{}let c=`${s}/.claude/hooks/logs`;try{Ks(c,{recursive:!0});let l=new Date().toISOString();if(i)Kt(`${c}/coverage-predictor.log`,`[${l}] COVERAGE_OK: ${n} has tests at ${i}
`);else return Kt(`${c}/coverage-predictor.log`,`[${l}] COVERAGE_WARN: ${n} may lack test coverage (expected: ${r})
`),{continue:!0,systemMessage:`Consider adding tests for: ${n}`}}catch{}return a()}import{existsSync as et,statSync as Vs,appendFileSync as Ys,mkdirSync as Qs}from"node:fs";function tr(t,e){let n=t.split("/").pop()||"",s=t.split("/").slice(0,-1).join("/"),r=(t.split(".").pop()||"").toLowerCase();switch(n){case"package.json":if(et(`${e}/${t}`))try{let o=x(`${e}/${t}`);if(Object.keys(o.scripts||{}).length>5)return{changeType:"scripts",readmeSection:"Available Scripts",suggestion:"Update README with new npm scripts"}}catch{}break;case"pyproject.toml":case"setup.py":case"setup.cfg":return{changeType:"python-config",readmeSection:"Installation",suggestion:"Verify README installation instructions match project config"};case"Dockerfile":case"docker-compose.yml":case"docker-compose.yaml":return{changeType:"docker",readmeSection:"Docker / Deployment",suggestion:"Update README Docker instructions"};case".env.example":case".env.template":return{changeType:"env",readmeSection:"Environment Variables",suggestion:"Update README environment variable documentation"}}if(t.includes("/api/")||t.includes("/routes/")||t.includes("/endpoints/"))return{changeType:"api",readmeSection:"API Endpoints",suggestion:"Update README API documentation or OpenAPI spec"};if(s.includes("/config")||s.includes("/settings"))return{changeType:"config",readmeSection:"Configuration",suggestion:"Document new configuration options in README"};if(["index.ts","index.js","main.py","app.py","__init__.py"].includes(n)&&t.split("/").length<=4)return{changeType:"entry-point",readmeSection:"Getting Started",suggestion:"Review README getting started section for accuracy"};if((t.includes("/bin/")||t.includes("/cli/")||t.includes("/scripts/"))&&["sh","py","ts"].includes(r))return{changeType:"cli",readmeSection:"CLI / Commands",suggestion:"Update README CLI usage documentation"};if(n==="index.ts"||n==="index.js"){let o=`${e}/${t}`;if(et(o))try{let{readFileSync:i}=x("fs");if((i(o,"utf8").match(/^export/gm)||[]).length>5)return{changeType:"exports",readmeSection:"API Reference",suggestion:"Consider updating API reference with new exports"}}catch{}}return null}function er(t){for(let e of["README.md","Readme.md","readme.md","README.rst","README"])if(et(`${t}/${e}`))return`${t}/${e}`;return null}function Vt(t){if((t.tool_name||"")!=="Write")return a();let n=g(t,"tool_input.file_path")||"";if(!n)return a();if(n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock")||n.endsWith(".log"))return a();if(n.includes("test")||n.includes("spec")||n.includes("__tests__"))return a();let s=p(),r=tr(n,s);if(!r)return a();let o=er(s),i;if(o){let l=0;try{let k=Vs(o).mtime.getTime(),y=Date.now();l=Math.floor((y-k)/(86400*1e3))}catch{}let d=r.suggestion;l>30&&(d=`${d} (README last updated ${l}+ days ago)`),i=`README sync: ${r.changeType} change in ${n.split("/").pop()}. Section: '${r.readmeSection}'. ${d}`}else i=`README sync: ${r.changeType} change detected but no README.md found. Consider creating one.`;i.length>200&&(i=`README sync: ${r.changeType} change detected. Consider updating '${r.readmeSection}' section.`);let c=`${s}/.claude/hooks/logs`;try{Qs(c,{recursive:!0});let l=new Date().toISOString();Ys(`${c}/readme-sync.log`,`[${l}] README_SYNC: ${r.changeType} change in ${n} -> ${r.readmeSection}
`)}catch{}return u("readme-sync",`README_SYNC: ${r.changeType} change suggests README update`),{continue:!0,hookSpecificOutput:{additionalContext:i}}}import{existsSync as nr}from"node:fs";function Yt(t){let n=`${p()}/.claude/coordination/lib/coordination.sh`;return nr(n)?a():a()}import{existsSync as nt,readFileSync as sr}from"node:fs";import{execSync as Qt}from"node:child_process";function rr(){try{Qt("which sqlite3",{stdio:"ignore",timeout:2e3});let e=`${p()}/.claude/coordination/.claude.db`;return nt(e)}catch{return!1}}function or(t,e){let s=`${p()}/.claude/coordination/.claude.db`;if(!nt(s))return!1;try{let r=t.replace(/'/g,"''"),o=e.replace(/'/g,"''");return Qt(`sqlite3 "${s}" "DELETE FROM file_locks WHERE file_path = '${r}' AND instance_id = '${o}';"`,{stdio:"ignore",timeout:5e3}),u("file-lock-release",`Released lock for ${t}`),!0}catch(r){return u("file-lock-release",`Failed to release lock for ${t}: ${r}`),!1}}function ir(){if(process.env.INSTANCE_ID)return process.env.INSTANCE_ID;let e=`${p()}/.claude/.instance_env`;if(nt(e))try{let s=sr(e,"utf8").match(/CLAUDE_INSTANCE_ID=["']?([^"'\n]+)/);if(s)return s[1]}catch{}return f()}function te(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return a();if(!rr())return a();let n=g(t,"tool_input.file_path")||"";if(!n)return a();if(n.includes("/.claude/coordination/"))return a();let s=String(g(t,"tool_result")||"");if(s.includes("error")||s.includes("Error"))return a();let r=ir();return or(n,r),a()}var ee={"posttool/audit-logger":A,"posttool/unified-error-handler":mt,"posttool/auto-lint":ft,"posttool/context-budget-monitor":St,"posttool/coordination-heartbeat":j,"posttool/mem0-webhook-handler":N,"posttool/memory-bridge":P,"posttool/realtime-sync":M,"posttool/session-metrics":F,"posttool/skill-edit-tracker":B,"posttool/calibration-tracker":U,"posttool/unified-dispatcher":Zt,"posttool/write/code-style-learner":J,"posttool/write/coverage-predictor":Xt,"posttool/write/naming-convention-learner":q,"posttool/write/readme-sync":Vt,"posttool/write/release-lock-on-commit":Yt,"posttool/bash/issue-progress-commenter":K,"posttool/bash/issue-subtask-updater":X,"posttool/bash/pattern-extractor":W,"posttool/skill/skill-usage-optimizer":Z,"posttool/write-edit/file-lock-release":te};function sa(t){return ee[t]}function ra(){return Object.keys(ee)}export{Ir as escapeRegex,V as estimateTokenCount,fe as extractIssueNumber,fr as getCachedBranch,pe as getCurrentBranch,Hr as getDefaultBranch,g as getField,me as getGitStatus,sa as getHook,ot as getLogDir,ae as getLogLevel,T as getPluginRoot,p as getProjectDir,Ar as getRepoRoot,f as getSessionId,Or as hasUncommittedChanges,ee as hooks,cr as isBashInput,lr as isEditInput,Dr as isGitRepo,ge as isProtectedBranch,dr as isReadInput,ur as isWriteInput,ra as listHooks,u as logHook,$r as logPermissionFeedback,vr as normalizeCommand,Sr as outputAllowWithContext,yr as outputBlock,xr as outputDeny,_r as outputError,ue as outputPromptContext,Er as outputPromptContextBudgeted,hr as outputSilentAllow,a as outputSilentSuccess,br as outputWarning,kr as outputWithContext,Cr as readHookInput,ce as shouldLog,jr as validateBranchName};
//# sourceMappingURL=posttool.mjs.map
