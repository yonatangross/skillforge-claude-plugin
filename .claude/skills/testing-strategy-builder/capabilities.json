{
  "$schema": "../../schemas/skill-capabilities.schema.json",
  "name": "testing-strategy-builder",
  "version": "1.1.0",
  "description": "Test planning templates, coverage targets, MSW network mocking, VCR.py HTTP recording, and guidance for unit, integration, E2E, and performance testing (2025 patterns)",

  "capabilities": {
    "test-planning": {
      "keywords": ["test plan", "testing strategy", "qa strategy", "test approach"],
      "solves": [
        "How do I plan testing for this feature?",
        "What's a good testing strategy?",
        "Create a test plan"
      ],
      "template_file": "templates/test-plan-template.md",
      "token_cost": 200
    },
    "unit-testing": {
      "keywords": ["unit test", "jest", "vitest", "pytest", "mock", "stub"],
      "solves": [
        "How do I write unit tests for this function?",
        "Unit testing best practices",
        "Mocking dependencies in tests"
      ],
      "reference_file": "references/code-examples.md#unit-testing",
      "token_cost": 180
    },
    "msw-testing": {
      "keywords": ["msw", "mock service worker", "network mocking", "http mock", "api mock", "fetch mock", "axios mock", "network level", "request handler"],
      "solves": [
        "How do I mock APIs in frontend tests?",
        "MSW setup with Vitest or Jest",
        "Network-level mocking instead of jest.mock",
        "Mock API responses for React testing",
        "Why not use jest.spyOn(fetch)?",
        "Test API error handling with MSW"
      ],
      "reference_file": "SKILL.md#msw-mock-service-worker",
      "token_cost": 350
    },
    "vcr-testing": {
      "keywords": ["vcr", "vcrpy", "pytest-vcr", "cassette", "http recording", "record replay", "deterministic http", "python api mock"],
      "solves": [
        "How do I record HTTP responses for Python tests?",
        "VCR.py setup with pytest",
        "Deterministic API testing in Python",
        "Record and replay HTTP interactions",
        "Test external APIs without live calls",
        "Mock LLM API responses in tests"
      ],
      "reference_file": "SKILL.md#vcrpy-python-http-recording",
      "token_cost": 300
    },
    "integration-testing": {
      "keywords": ["integration test", "api test", "database test", "service test"],
      "solves": [
        "How do I test API endpoints?",
        "Integration testing patterns",
        "Testing database operations"
      ],
      "reference_file": "references/code-examples.md#integration-testing",
      "token_cost": 180
    },
    "e2e-testing": {
      "keywords": ["e2e", "end-to-end", "playwright", "cypress", "browser test"],
      "solves": [
        "How do I set up E2E tests?",
        "Playwright test patterns",
        "Testing user flows"
      ],
      "reference_file": "references/code-examples.md#e2e-testing",
      "token_cost": 200
    },
    "coverage": {
      "keywords": ["coverage", "code coverage", "test coverage", "c8", "istanbul"],
      "solves": [
        "How do I measure test coverage?",
        "What coverage target should I have?",
        "Improve test coverage"
      ],
      "checklist_file": "checklists/test-coverage-checklist.md",
      "token_cost": 120
    },
    "performance-testing": {
      "keywords": ["load test", "performance test", "k6", "locust", "stress test"],
      "solves": [
        "How do I load test my API?",
        "Performance testing strategy",
        "Stress testing best practices"
      ],
      "reference_file": "references/code-examples.md#performance-testing",
      "token_cost": 150
    }
  },

  "triggers": {
    "high_confidence": ["test.*strategy", "testing.*plan", "coverage.*target", "e2e.*test", "msw", "mock.*service.*worker", "vcr", "vcrpy", "cassette"],
    "medium_confidence": ["write.*test", "add.*test", "test.*this", "mock.*api", "network.*mock", "http.*record"]
  },

  "integrates_with": ["code-review-playbook", "evidence-verification"],

  "progressive_loading": {
    "tier_1_discovery": {
      "file": "capabilities.json",
      "tokens": 100,
      "use_when": "Initial task analysis - determine if testing strategy skill is relevant"
    },
    "tier_2_overview": {
      "file": "SKILL.md",
      "tokens": 500,
      "use_when": "Skill confirmed relevant - need testing philosophy and coverage targets"
    },
    "tier_3_specific": {
      "files": "references/code-examples.md#*",
      "tokens": "150-200 each",
      "use_when": "Need specific test implementation examples (unit, integration, E2E, performance)"
    },
    "tier_4_generate": {
      "files": "templates/*.md",
      "tokens": "200-300 each",
      "use_when": "Ready to generate test plans or test case documentation"
    }
  },

  "mcp_tools": {
    "browser_testing": {
      "tool": "playwright",
      "use_when": "E2E testing needed for browser automation"
    },
    "documentation_lookup": {
      "tool": "context7",
      "library_ids": ["/vitest-dev/vitest", "/jestjs/jest", "/microsoft/playwright"],
      "use_when": "Need current testing framework specific patterns"
    }
  }
}
