{
  "$schema": "../../schemas/skill-capabilities.schema.json",
  "name": "browser-content-capture",
  "version": "1.0.0",
  "description": "Capture content from JS-rendered pages, auth-protected sites, and multi-page docs using Playwright MCP or Chrome extension",

  "capabilities": {
    "spa-extraction": {
      "keywords": ["react", "vue", "angular", "spa", "javascript", "client-side", "hydration", "ssr"],
      "solves": [
        "WebFetch returns empty content",
        "Page requires JavaScript to render",
        "React/Vue app content extraction"
      ],
      "reference_file": "references/spa-extraction.md",
      "token_cost": 200
    },
    "auth-handling": {
      "keywords": ["login", "authentication", "session", "cookie", "protected", "private", "gated"],
      "solves": [
        "Content behind login wall",
        "Need to authenticate first",
        "Private documentation access"
      ],
      "reference_file": "references/auth-handling.md",
      "token_cost": 180
    },
    "multi-page-crawl": {
      "keywords": ["crawl", "sitemap", "navigation", "multiple pages", "documentation", "tutorial series"],
      "solves": [
        "Capture entire documentation site",
        "Extract multiple pages",
        "Follow navigation links"
      ],
      "reference_file": "references/multi-page-crawl.md",
      "token_cost": 220
    },
    "mcp-tools": {
      "keywords": ["playwright", "mcp", "browser_navigate", "browser_evaluate", "browser_click"],
      "solves": [
        "Which MCP tool to use",
        "Browser automation commands",
        "Playwright MCP reference"
      ],
      "reference_file": "references/mcp-tools.md",
      "token_cost": 250
    },
    "skillforge-integration": {
      "keywords": ["queue", "analyze", "pipeline", "api", "skillforge", "content_override"],
      "solves": [
        "Send captured content to SkillForge",
        "Queue URL for analysis",
        "Integrate with analysis pipeline"
      ],
      "reference_file": "templates/queue-to-skillforge.py",
      "token_cost": 150
    }
  },

  "triggers": {
    "high_confidence": ["webfetch.*empty", "spa.*content", "login.*required", "javascript.*render"],
    "medium_confidence": ["browser.*capture", "scrape.*dynamic", "react.*docs"]
  },

  "integrates_with": ["webapp-testing", "streaming-api-patterns", "ai-native-development"],

  "progressive_loading": {
    "tier_1_discovery": {
      "file": "capabilities.json",
      "tokens": 100,
      "use_when": "Initial task analysis - determine if browser capture is needed"
    },
    "tier_2_overview": {
      "file": "SKILL.md",
      "tokens": 600,
      "use_when": "Skill confirmed relevant - need browser automation patterns and decision tree"
    },
    "tier_3_specific": {
      "files": "references/*.md",
      "tokens": "150-250 each",
      "use_when": "Need specific implementation guidance for SPA, auth, or multi-page scenarios"
    },
    "tier_4_generate": {
      "files": "templates/*.py",
      "tokens": "100-200 each",
      "use_when": "Ready to integrate captured content with SkillForge pipeline"
    }
  },

  "mcp_tools": {
    "browser_automation": {
      "tool": "playwright",
      "methods": [
        "browser_navigate",
        "browser_snapshot",
        "browser_evaluate",
        "browser_click",
        "browser_fill_form",
        "browser_wait_for",
        "browser_take_screenshot",
        "browser_console_messages",
        "browser_network_requests"
      ],
      "use_when": "Content requires browser-level access (SPAs, dynamic content, multi-page crawls)"
    },
    "chrome_extension": {
      "tool": "claude-in-chrome",
      "use_when": "Content requires user's authenticated session (login-protected docs)"
    }
  }
}
