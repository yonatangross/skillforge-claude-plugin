// OrchestKit Hooks - posttool bundle
// Generated: 2026-01-23T17:36:27.131Z

var x=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});function mo(t){return typeof t.command=="string"}function fo(t){return typeof t.file_path=="string"&&typeof t.content=="string"}function yo(t){return typeof t.file_path=="string"&&typeof t.old_string=="string"&&typeof t.new_string=="string"}function ho(t){return typeof t.file_path=="string"&&t.content===void 0}import{appendFileSync as B,existsSync as J,statSync as se,renameSync as oe,mkdirSync as re}from"node:fs";function W(){return process.env.CLAUDE_PLUGIN_ROOT?`${process.env.HOME}/.claude/logs/ork`:`${g()}/.claude/logs`}function g(){return process.env.CLAUDE_PROJECT_DIR||"."}function R(){return process.env.CLAUDE_PLUGIN_ROOT||process.env.CLAUDE_PROJECT_DIR||"."}function f(){return process.env.CLAUDE_SESSION_ID||`fallback-${process.pid}-${Date.now()}`}function c(){return{continue:!0,suppressOutput:!0}}function _o(){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{permissionDecision:"allow"}}}function bo(t){return{continue:!1,stopReason:t,hookSpecificOutput:{permissionDecision:"deny",permissionDecisionReason:t}}}function xo(t){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"PostToolUse",additionalContext:t}}}function $o(t){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"UserPromptSubmit",additionalContext:t}}}function Eo(t,e){let n={continue:!0,hookSpecificOutput:{hookEventName:"PreToolUse",additionalContext:t,permissionDecision:"allow"}};return e?n.systemMessage=e:n.suppressOutput=!0,n}function Co(t){return{continue:!0,systemMessage:t}}function vo(t){return{continue:!0,systemMessage:`\u26A0 ${t}`}}function Io(t){return{continue:!1,stopReason:t,hookSpecificOutput:{hookEventName:"PreToolUse",permissionDecision:"deny",permissionDecisionReason:t}}}var ie=200*1024,ce=100*1024;function q(t,e){if(J(t))try{if(se(t).size>e){let s=`${t}.old.${Date.now()}`;oe(t,s)}}catch{}}function G(t){J(t)||re(t,{recursive:!0})}function u(t,e){let n=W(),s=`${n}/hooks.log`;try{G(n),q(s,ie);let o=new Date().toISOString().replace("T"," ").slice(0,19);B(s,`[${o}] [${t}] ${e}
`)}catch{}}function wo(t,e,n){let s=W(),o=`${s}/permission-feedback.log`;try{G(s),q(o,ce);let r=new Date().toISOString(),i=n?.tool_name||process.env.HOOK_TOOL_NAME||"unknown",l=n?.session_id||f();B(o,`${r} | ${t} | ${e} | tool=${i} | session=${l}
`)}catch{}}function Ro(){try{let t=[],n=Buffer.allocUnsafe(256),s,o=0,{readSync:r}=x("node:fs");for(;;)try{if(s=r(o,n,0,256,null),s===0)break;t.push(Buffer.from(n.subarray(0,s)))}catch{break}let i=Buffer.concat(t).toString("utf8").trim();return i?JSON.parse(i):{tool_name:"",session_id:f(),tool_input:{}}}catch{return{tool_name:"",session_id:f(),tool_input:{}}}}function p(t,e){let n=e.replace(/^\./,"").split("."),s=t;for(let o of n){if(s==null)return;s=s[o]}return s}function To(t){return t.replace(/\\\s*[\r\n]+/g," ").replace(/\n/g," ").replace(/\s+/g," ").trim()}function Ao(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}import{execSync as I}from"node:child_process";function ae(t){let e=t||g();try{return I("git branch --show-current",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim()}catch{return"unknown"}}function ue(t){let e=t||ae();return["dev","main","master"].includes(e)}function No(t){let e=t||g();try{return I("git rev-parse --show-toplevel",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim()}catch{return e}}function Ho(t){let e=t||g();try{return I("git rev-parse --git-dir",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),!0}catch{return!1}}function le(t){let e=t||g();try{return I("git status --short",{cwd:e,encoding:"utf8",timeout:1e4,stdio:["pipe","pipe","pipe"]}).trim()}catch{return""}}function Po(t){return le(t).length>0}function Mo(t){let e=t||g();try{return I("git rev-parse --verify main",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),"main"}catch{try{return I("git rev-parse --verify master",{cwd:e,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),"master"}catch{return"main"}}}function de(t){let e=[/issue\/(\d+)/i,/feature\/(\d+)/i,/fix\/(\d+)/i,/bug\/(\d+)/i,/feat\/(\d+)/i,/^(\d+)-/,/-(\d+)$/,/#(\d+)/];for(let n of e){let s=t.match(n);if(s)return parseInt(s[1],10)}return null}function Fo(t){if(ue(t))return null;let e=["issue/","feature/","fix/","bug/","feat/","chore/","docs/","refactor/","test/","ci/","perf/","style/","release/","hotfix/"];return e.some(s=>t.startsWith(s))?t.startsWith("issue/")&&!de(t)?"issue/ branches should include an issue number (e.g., issue/123-description)":null:`Branch name should start with a valid prefix: ${e.join(", ")}`}import{appendFileSync as pe,existsSync as K,mkdirSync as ge,statSync as me,renameSync as fe}from"node:fs";var Z="/tmp/claude-read-count";function X(t){let e=t.tool_name||"";if(["Read","Glob","Grep"].includes(e))try{let{readFileSync:o,writeFileSync:r}=x("node:fs"),i=0;try{i=parseInt(o(Z,"utf8").trim(),10)||0}catch{}if(i++,r(Z,String(i)),i%10!==0)return c()}catch{}let n=process.env.CLAUDE_PROJECT_DIR||".",s=`${n}/.claude/logs/audit.log`;try{let o=`${n}/.claude/logs`;K(o)||ge(o,{recursive:!0}),ye(s,200*1024);let r=new Date().toISOString().replace("T"," ").slice(0,19),i="";switch(e){case"Bash":{i=(p(t,"tool_input.command")||"").substring(0,100);break}case"Write":case"Edit":{i=p(t,"tool_input.file_path")||"";break}case"Task":{i=p(t,"tool_input.subagent_type")||"";break}}let l=i?`[${r}] ${e} | ${i}
`:`[${r}] ${e}
`;pe(s,l)}catch{}return c()}function ye(t,e){if(K(t))try{if(me(t).size>e){let s=`${t}.old.${Date.now()}`;fe(t,s)}}catch{}}import{existsSync as he}from"node:fs";import{execSync as w}from"node:child_process";function ke(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"json":return"json";case"css":case"scss":return"css";default:return null}}function M(t){try{return w(`which ${t}`,{stdio:"ignore"}),!0}catch{return!1}}function V(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return c();let n=p(t,"tool_input.file_path")||"";if(!n||n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock"))return c();let s=process.env.CLAUDE_PROJECT_DIR||".",o=n.startsWith("/")?n:`${s}/${n}`;if(!he(o))return c();if(process.env.SKIP_AUTO_LINT==="1")return c();let r=ke(n);if(!r)return c();let i=0,l=!1;try{switch(r){case"python":if(M("ruff")){try{let a=w(`timeout 5s ruff check --output-format=concise "${o}" 2>&1`,{encoding:"utf8",stdio:["pipe","pipe","pipe"]});a&&(i=a.split(`
`).filter(Boolean).length,w(`timeout 5s ruff check --fix --unsafe-fixes=false "${o}" 2>/dev/null`,{stdio:"ignore"}),l=!0)}catch{}try{w(`timeout 5s ruff format "${o}" 2>/dev/null`,{stdio:"ignore"})}catch{}}break;case"typescript":case"javascript":if(M("biome"))try{let a=w(`timeout 5s biome check --write "${o}" 2>&1`,{encoding:"utf8",stdio:["pipe","pipe","pipe"]});a.includes("Fixed")&&(l=!0),a.includes("error")&&(i=(a.match(/error/g)||[]).length)}catch{}break;case"json":case"css":if(M("biome"))try{w(`timeout 5s biome format --write "${o}" 2>/dev/null`,{stdio:"ignore"}),l=!0}catch{}break}}catch(a){u("auto-lint",`Error: ${a}`)}if(l&&i>0){let a=n.split("/").pop();return{continue:!0,systemMessage:`Auto-lint: fixed issues, ${i} remaining in ${a}`}}return c()}import{existsSync as F,readFileSync as tt,writeFileSync as A,statSync as Se,mkdirSync as _e}from"node:fs";var T=2200,Y=.7,be=.5,xe=.1;function $e(t){if(!F(t))return 0;try{let e=Se(t);return Math.floor(e.size/4)}catch{return 0}}function Q(){let e=`${g()}/context`,n=[`${e}/identity.json`,`${e}/session/state.json`,`${e}/knowledge/index.json`,`${e}/knowledge/blockers/current.json`],s=0;for(let o of n)s+=$e(o);return s}function et(){let t=parseInt(process.env.CLAUDE_MAX_CONTEXT||"200000",10);return Math.floor(t*(100-20)/100)}function Ee(t){let e=et();return e===0?!0:t/e>xe}function Ce(t,e){let s=`/tmp/claude-mcp-defer-state-${f()}.json`,o=et(),r={mcp_deferred:t,context_tokens:e,effective_window:o,updated_at:new Date().toISOString(),reason:t?"context > 10% threshold":"context within limits"};try{A(s,JSON.stringify(r,null,2))}catch{}u("context-budget-monitor",`MCP defer state updated: defer=${t}, tokens=${e}, window=${o}`)}function ve(){let e=`${g()}/context/session/state.json`;if(F(e))try{let n=JSON.parse(tt(e,"utf8")),s={session_id:n.session_id,started:n.started,current_task:n.current_task,next_steps:(n.next_steps||[]).slice(-3),blockers:n.blockers,_compressed:!0,_compressed_at:new Date().toISOString(),_original_files_touched:(n.files_touched||[]).length,_original_decisions:(n.decisions_this_session||[]).length};A(e,JSON.stringify(s,null,2)),u("context-budget-monitor","Session state compressed")}catch{}}function Ie(){let t=g(),e=`${t}/context/knowledge/decisions/active.json`;if(F(e))try{let n=JSON.parse(tt(e,"utf8")),s=n.decisions||[];if(s.length>10){u("context-budget-monitor","Archiving old decisions (keeping latest 5)...");let o=`${t}/context/archive/decisions`;_e(o,{recursive:!0});let r=new Date,i=`${o}/${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}.json`;A(i,JSON.stringify(s.slice(0,-5),null,2)),n.decisions=s.slice(-5),A(e,JSON.stringify(n,null,2)),u("context-budget-monitor",`Archived ${s.length-5} decisions to ${i}`)}}catch{}}function nt(t){try{let e=Q(),n=e/T,s=Math.floor(n*100);u("context-budget-monitor",`Context usage: ${e} / ${T} tokens (${s}%)`);let o=Ee(e);if(Ce(o,e),n>Y){u("context-budget-monitor",`WARNING: Context usage (${s}%) exceeds threshold (${Y*100}%)`),u("context-budget-monitor","Triggering compression..."),ve(),Ie();let r=Q(),i=r/T,l=Math.floor(i*100);u("context-budget-monitor",`After compression: ${r} / ${T} tokens (${l}%)`),i>be?u("context-budget-monitor","WARNING: Still above target. Manual review recommended."):u("context-budget-monitor","Compression successful. Target achieved.")}else u("context-budget-monitor","Context usage within budget. No compression needed.")}catch(e){u("context-budget-monitor",`Error: ${e}`)}return c()}import{existsSync as st,readFileSync as we}from"node:fs";import{execSync as Re}from"node:child_process";function ot(t){let e=g(),n=`${e}/.claude/coordination/lib/coordination.sh`;if(!st(n))return c();try{let s=`${e}/.claude/.instance_env`,o=process.env.CLAUDE_SESSION_ID||`fallback-${process.pid}`;if(st(s)){let i=we(s,"utf8").match(/CLAUDE_INSTANCE_ID=["']?([^"'\n]+)/);i&&(o=i[1])}o&&Re(`source "${n}" && INSTANCE_ID="${o}" coord_heartbeat 2>/dev/null || true`,{shell:"/bin/bash",stdio:"ignore",timeout:5e3})}catch(s){u("coordination-heartbeat",`Heartbeat update failed: ${s}`)}return c()}import{existsSync as it,appendFileSync as Te,readFileSync as Ae,writeFileSync as De,mkdirSync as Oe,statSync as je,renameSync as Ne}from"node:fs";import{createHash as He}from"node:crypto";var rt=/error:|Error:|ERROR|FATAL|exception|failed|denied|not found|does not exist|connection refused|timeout|ENOENT|EACCES|EPERM/i;function Pe(t,e){if(it(t))try{if(je(t).size>e){let s=`${t}.old.${Date.now()}`;Ne(t,s)}}catch{}}function ct(t){let e=t.tool_name||"",n=f(),s=new Date().toISOString(),o=String(p(t,"tool_output")||t.tool_output||""),r=t.exit_code??0,i=String(t.tool_error||p(t,"error")||""),l=!1,a="",d="";if(r!==0&&r!==void 0&&(l=!0,a="exit_code",d=`Exit code: ${r}`),i&&(l=!0,a="tool_error",d=i),rt.test(o)){l=!0,a=a||"output_pattern";let y=o.split(`
`).filter(k=>rt.test(k));d=d||y[0]||""}if(l){let y=g(),k=`${y}/.claude/logs/errors.jsonl`;try{Oe(`${y}/.claude/logs`,{recursive:!0}),Pe(k,1e3*1024);let h=t.tool_input||{},$=He("md5").update(JSON.stringify(h)).digest("hex"),m=d.substring(0,500),S=o.substring(0,1e3);Te(k,JSON.stringify({timestamp:s,tool:e,session_id:n,error_type:a,error_message:m,input_hash:$,tool_input:h,output_preview:S})+`
`);let P="/tmp/claude-session-errors.json";try{let v={error_count:0,last_error_tool:"",last_error_time:""};it(P)&&(v=JSON.parse(Ae(P,"utf8"))),v.error_count=(v.error_count||0)+1,v.last_error_tool=e,v.last_error_time=s,De(P,JSON.stringify(v,null,2))}catch{}u("error-collector",`ERROR captured: ${e} - ${a} - ${d.substring(0,100)}`)}catch{u("error-collector",`ERROR (fallback): ${e} - ${a}`)}}return c()}import{existsSync as D,readFileSync as O,writeFileSync as L,mkdirSync as Me}from"node:fs";import{createHash as Fe}from"node:crypto";var at=2e3,Le=10,Ue=3;function ze(t){let e=t.exit_code,n=t.tool_error||p(t,"error")||"",s=String(p(t,"tool_output")||t.tool_output||"");return!!(e!=null&&e!==0||n||/error:|ERROR|FATAL|exception|failed|denied|not found|does not exist|connection refused|ENOENT|EACCES|EPERM/i.test(s))}function Be(t,e){if(!D(e))return u("error-solution-suggester",`Solutions file not found: ${e}`),null;try{let n=JSON.parse(O(e,"utf8")),s=t.toLowerCase();for(let o of n.patterns||[])if(o.regex)try{if(new RegExp(o.regex,"i").test(s))return o}catch{}}catch{}return null}function Je(t,e,n){if(!D(n))try{Me(x("path").dirname(n),{recursive:!0}),L(n,JSON.stringify({suggestions:{},prompt_count:0}))}catch{return!0}try{let s=JSON.parse(O(n,"utf8")),o=Fe("md5").update(`${t}|${e.substring(0,100)}`).digest("hex"),r=(s.prompt_count||0)+1;s.prompt_count=r;let i=s.suggestions[o]?.prompt_count||0;return i===0||r-i>=Le?(s.suggestions[o]={pattern_id:t,prompt_count:r},L(n,JSON.stringify(s,null,2)),!0):(L(n,JSON.stringify(s,null,2)),!1)}catch{return!0}}function We(t,e){let n=`${e}/${t}/SKILL.md`;if(!D(n))return"";try{let o=O(n,"utf8").match(/^---\n([\s\S]*?)\n---/);if(o){let r=o[1].match(/description:\s*(.+)/);if(r)return r[1].trim()}}catch{}return""}function qe(t,e,n){let s=t.category||"",o=t.skills||[],r=[];if(s&&D(e))try{r=JSON.parse(O(e,"utf8")).categories?.[s]?.related_skills||[]}catch{}let i=[...new Set([...o,...r])].slice(0,Ue);if(i.length===0)return"";let l=`### Related Skills

`;for(let a of i){let d=We(a,n);d?l+=`- **${a}**: ${d}
`:l+=`- **${a}**
`}return l+="\nUse `/ork:<skill-name>` or `Read skills/<skill-name>/SKILL.md`",l}function Ge(t,e,n){let s=t.solution?.brief||"An error was detected.",o=t.solution?.steps||[],r=`## Error Solution

`;r+=`**${s}**

`,o.length>0&&(r+=`### Quick Fixes

`,o.forEach((l,a)=>{r+=`  ${a+1}. ${l}
`}),r+=`
`);let i=qe(t,e,n);return i&&(r+=i),r.length>at&&(r=r.substring(0,at-20)+`...

(truncated)`),r}function ut(t){if(t.tool_name!=="Bash")return c();if(!ze(t))return c();u("error-solution-suggester","Error detected, analyzing for solutions...");let e=String(p(t,"tool_output")||t.tool_output||""),s=String(t.tool_error||p(t,"error")||"")||e;if(s=s.substring(0,2e3),!s)return u("error-solution-suggester","No error text found"),c();let o=R(),r=`${o}/.claude/rules/error_solutions.json`,i=`${o}/skills`,a=`/tmp/claude-error-suggestions-${f()}.json`,d=Be(s,r);if(!d)return u("error-solution-suggester","No matching pattern found"),c();if(u("error-solution-suggester",`Matched pattern: ${d.id}`),!Je(d.id,s,a))return u("error-solution-suggester",`Skipping duplicate suggestion for pattern: ${d.id}`),c();let y=Ge(d,r,i);return y?(u("error-solution-suggester","Injecting solution suggestion via additionalContext"),{continue:!0,hookSpecificOutput:{additionalContext:y}}):c()}import{existsSync as Ze,readFileSync as Ke,writeFileSync as Xe,appendFileSync as Ve,mkdirSync as Ye}from"node:fs";var Qe=/^(echo |ls |ls$|pwd|cat |head |tail |wc |date|whoami)/;function lt(t){let e=t.tool_name||"";if(e==="Bash"){let l=p(t,"tool_input.command")||"";if(Qe.test(l))return c()}let n=String(t.tool_error||""),s=t.exit_code;if(!n&&(s===0||s===void 0||s===null))return c();u("error-tracker",`ERROR: ${e} failed (exit: ${s})`);let o="/tmp/claude-session-metrics.json";try{let l={tools:{},errors:0,warnings:0};if(Ze(o)){let a=Ke(o,"utf8").trim();a&&(l=JSON.parse(a))}l.errors=(l.errors||0)+1,Xe(o,JSON.stringify(l,null,2))}catch{}let r=g(),i=`${r}/.claude/logs/errors.log`;try{Ye(`${r}/.claude/logs`,{recursive:!0});let l=new Date().toISOString().replace("T"," ").slice(0,19),a=n.substring(0,200);Ve(i,`[${l}] ${e} | exit: ${s} | ${a}
`)}catch{}return c()}function dt(t){u("mem0-webhook-handler","Mem0 webhook handler starting");let e=t.tool_name||"",n=p(t,"tool_input.command")||"";if(e!=="Bash"||!n.includes("webhook-receiver.py"))return c();let s=p(t,"tool_result")||"";if(!s)return u("mem0-webhook-handler","No event data found in webhook call"),c();try{let o;try{o=JSON.parse(s)}catch{return u("mem0-webhook-handler","Could not parse event data"),c()}let r=o.result?.event_type||o.event_type||"",i=o.result?.memory_id||o.memory?.id||"";switch(u("mem0-webhook-handler",`Processing webhook event: ${r} (memory: ${i})`),r){case"memory.created":u("mem0-webhook-handler","Memory created - trigger graph sync");break;case"memory.updated":u("mem0-webhook-handler","Memory updated - trigger decision sync");break;case"memory.deleted":u("mem0-webhook-handler","Memory deleted - cleanup graph entities");break;default:u("mem0-webhook-handler",`Unknown event type: ${r}`);break}}catch(o){u("mem0-webhook-handler",`Error processing webhook: ${o}`)}return c()}import{existsSync as tn}from"node:fs";var en={Technology:/fastapi|react|typescript|python|postgres|redis|docker|kubernetes|langchain|langgraph|pgvector|qdrant|openai|anthropic|celery|rabbitmq|kafka|nginx|vite|tailwind|prisma|sqlalchemy|alembic|pydantic|zod/i,Pattern:/singleton|factory|repository|service|controller|adapter|facade|strategy|observer|decorator|middleware|dependency.injection|cursor.pagination|rate.limiting|circuit.breaker/i,Decision:/decided|chose|selected|will.use|adopted|standardized|migrated/i,Architecture:/microservice|monolith|event.driven|cqrs|event.sourcing|hexagonal|clean.architecture|ddd|api.gateway|load.balancer/i,Database:/postgresql|mysql|mongodb|sqlite|dynamodb|cassandra|schema|migration|index|query/i,Security:/jwt|oauth|cors|csrf|xss|sql.injection|rate.limit|encryption|authentication|authorization/i};function nn(t){let e=t.toLowerCase(),n=[];for(let[s,o]of Object.entries(en)){let r=e.match(o);if(r)for(let i of[...new Set(r)].slice(0,5)){let l=i.split(/[\s-_]+/).map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join("-"),a="Used in project context";/decided.*/.test(e)&&e.includes(i)?a="Decided to use for project":/chose.*/.test(e)&&e.includes(i)?a="Chosen for implementation":/will.use.*/.test(e)&&e.includes(i)&&(a="Will be used in project"),n.push({name:l,entityType:s,observations:[a]})}}return n}function sn(t,e){let n=t.toLowerCase(),s=[],o=e.map(r=>r.name);for(let r of o){let i=r.toLowerCase().replace(/-/g,".");for(let l of o){if(r===l)continue;let a=l.toLowerCase().replace(/-/g,".");new RegExp(`${i}.*(with|using|and|integrated|connected|for).*${a}`,"i").test(n)&&s.push({from:r,to:l,relationType:"uses"})}}return s}function pt(t){switch(t.tool_name||""){case"mcp__mem0__add_memory":{u("memory-bridge","Processing mcp__mem0__add_memory - syncing to graph (primary)");let n=p(t,"tool_input.text")||"";if(!n||n.length<20)return u("memory-bridge","Memory text too short, skipping"),c();let o=`${R()}/bin/memory-fabric-agent.py`;tn(o)&&u("memory-bridge","Memory Fabric Agent available for bidirectional sync");let i=nn(n),l=i.length;if(l===0)return u("memory-bridge","No entities extracted"),c();let a=sn(n,i),d=a.length;u("memory-bridge",`Extracted ${l} entities and ${d} relations`);let y=i.slice(0,5).map(h=>`- ${h.name} (${h.entityType}): ${h.observations[0]||"observed"}`).join(`
`),k=`[Memory Bridge] Sync to Graph (primary storage)

Mem0 content should be synced to the knowledge graph for durability.
Detected ${l} entities to preserve:

${y}

Store in graph with mcp__memory__create_entities:
\`\`\`json
{"entities": ${JSON.stringify(i)}}
\`\`\``;return d>0&&(k+=`

Then call mcp__memory__create_relations with:
\`\`\`json
{"relations": ${JSON.stringify(a)}}
\`\`\``),{continue:!0,systemMessage:k}}case"mcp__memory__create_entities":return u("memory-bridge","mcp__memory__create_entities - graph is primary, no sync needed"),c();default:return c()}}import{existsSync as yt,readFileSync as ht,writeFileSync as kt,mkdirSync as on}from"node:fs";var rn=/decided|chose|architecture|security|blocked|breaking|critical|must|cannot|deprecated|removed|migration/i,cn=/pattern|convention|preference|style|format|naming/i,an=30,un=85,ln=90;function dn(){let t=parseInt(process.env.CLAUDE_CONTEXT_USED_PERCENTAGE||"0",10);if(t===0){let e=parseInt(process.env.CLAUDE_CONTEXT_TOKENS_USED||"0",10),n=parseInt(process.env.CLAUDE_CONTEXT_MAX_TOKENS||"0",10);if(n>0)return Math.floor(e*100/n)}return t}function pn(t){return rn.test(t)?"IMMEDIATE":cn.test(t)?"BATCHED":"SESSION_END"}function gt(t){let e=[/[^.]*\b(decided|chose|selected|will use|must|cannot|blocked|breaking)[^.]*/i,/[^.]*\b(architecture|security|migration|deprecated)[^.]*/i];for(let s of e){let o=t.match(s);if(o)return o[0].trim().substring(0,300)}let n=t.match(/^[^.]{30,200}\./);return n?n[0].trim():t.substring(0,300).trim()}function mt(t){let e=t.toLowerCase();return/security|auth|jwt|oauth|cors|xss/.test(e)?"security":/architecture|design|structure|system/.test(e)?"architecture":/database|schema|migration|postgres|sql/.test(e)?"database":/blocked|issue|bug|problem|cannot/.test(e)?"blocker":/breaking|deprecated|removed|migration/.test(e)?"breaking-change":/api|endpoint|route|rest/.test(e)?"api":/decided|chose|selected/.test(e)?"decision":"general"}function gn(t){if(!yt(t))try{on(x("path").dirname(t),{recursive:!0}),kt(t,JSON.stringify({pending:[],created_at:new Date().toISOString()}))}catch{}}function mn(t,e,n){gn(n);try{let s=JSON.parse(ht(n,"utf8"));s.pending.push({content:t,category:e,queued_at:new Date().toISOString()}),kt(n,JSON.stringify(s,null,2)),u("realtime-sync",`Added to pending queue: category=${e}, length=${t.length}`)}catch{}}function ft(t){if(!yt(t))return 0;try{return JSON.parse(ht(t,"utf8")).pending?.length||0}catch{return 0}}function St(t){let e=t.tool_name||"";if(!["Bash","Write","Edit","Skill","Task"].includes(e))return c();let n="";switch(e){case"Bash":{n=String(p(t,"tool_output")||t.tool_output||"");let a=p(t,"tool_input.command")||"";a&&(n=`${a}
${n}`);break}case"Write":case"Edit":{let a=p(t,"tool_input.new_string")||p(t,"tool_input.content")||"",d=p(t,"tool_input.file_path")||"";n=d?`Writing to ${d}: ${a}`:a;break}case"Skill":case"Task":{n=String(p(t,"tool_result")||t.tool_output||"");break}}if(!n||n.length<an)return c();let s=pn(n);u("realtime-sync",`Tool: ${e}, Priority: ${s}, Content length: ${n.length}`);let o=dn(),r=g(),i=f(),l=`${r}/.claude/logs/.mem0-pending-sync-${i}.json`;if(s==="BATCHED"&&o>=un&&(s="IMMEDIATE",u("realtime-sync",`EMERGENCY: Context at ${o}%, upgrading BATCHED to IMMEDIATE`)),o>=ln){let a=ft(l);if(a>0)return u("realtime-sync",`CRITICAL: Context at ${o}%, flushing ${a} pending items`),{continue:!0,systemMessage:`[CRITICAL SYNC] Context at ${o}% - compaction imminent!

${a} items in pending queue need immediate sync to knowledge graph.
Pending sync file: ${l}

Execute mcp__memory__create_entities for each item in the pending file NOW
to preserve session context in the knowledge graph before compaction.`}}switch(s){case"IMMEDIATE":{let a=gt(n);if(!a||a.length<20)return u("realtime-sync","Could not extract meaningful decision"),c();let d=mt(a);return u("realtime-sync",`IMMEDIATE sync triggered: category=${d}`),{continue:!0,systemMessage:`[IMMEDIATE SYNC] Critical decision detected - store in knowledge graph now.

Category: ${d}
Decision: "${a.substring(0,200)}"

Store in knowledge graph with mcp__memory__create_entities:
\`\`\`json
{
  "entities": [{
    "name": "${d}-decision",
    "entityType": "Decision",
    "observations": ["${a.substring(0,300).replace(/"/g,'\\"')}"]
  }]
}
\`\`\`

This decision is critical and should be synced immediately for:
- Session continuity if interrupted
- Cross-agent knowledge sharing
- Future reference in similar contexts`}}case"BATCHED":{let a=gt(n);if(a&&a.length>=20){let d=mt(a);mn(a,d,l);let y=ft(l);if(y>=5)return u("realtime-sync",`BATCHED queue has ${y} items - triggering batch sync`),{continue:!0,systemMessage:`[BATCHED SYNC] ${y} patterns/conventions queued for graph sync.

Latest: "${a.substring(0,100)}..." (${d})

These will be synced to knowledge graph at session end, or trigger batch sync now with mcp__memory__create_entities for each item in:
${l}`}}return c()}default:return c()}}import{existsSync as fn,readFileSync as yn,writeFileSync as hn}from"node:fs";var j="/tmp/claude-session-metrics.json",$r=`${j}.lock`;function _t(t){let e=t.tool_name||"";if(!e)return c();try{let n={tools:{},errors:0,warnings:0};if(fn(j))try{let o=yn(j,"utf8").trim();o&&(n=JSON.parse(o))}catch{n={tools:{},errors:0,warnings:0}}n.tools||(n.tools={});let s=n.tools[e]||0;n.tools[e]=s+1,hn(j,JSON.stringify(n,null,2))}catch(n){u("session-metrics",`Error updating metrics: ${n}`)}return c()}import{existsSync as kn,readFileSync as Sn,appendFileSync as _n,mkdirSync as bn}from"node:fs";var xn=[{name:"add_pagination",regex:/limit.*offset|page.*size|cursor.*pagination|paginate|Paginated/i},{name:"add_rate_limiting",regex:/rate.?limit|throttl|RateLimiter|requests.?per/i},{name:"add_caching",regex:/@cache|cache_key|TTL|redis|memcache|@cached/i},{name:"add_retry_logic",regex:/retry|backoff|max_attempts|tenacity|Retry/i},{name:"add_error_handling",regex:/try.*catch|except|raise.*Exception|throw.*Error|error.*handler/i},{name:"add_validation",regex:/validate|Validator|@validate|Pydantic|Zod|yup|schema/i},{name:"add_logging",regex:/logger[.]|logging[.]|console[.]log|winston|pino|structlog/i},{name:"add_types",regex:/: *(str|int|bool|List|Dict|Optional)|interface |type .*=/i},{name:"add_type_guards",regex:/isinstance|typeof|is.*Type|assert.*type/i},{name:"add_docstring",regex:/docstring|"""[^"]+"""|\/\*\*/i},{name:"remove_comments",regex:/^-.*#|^-.*\/\/|^-.*\*/m},{name:"add_auth_check",regex:/@auth|@require_auth|isAuthenticated|requiresAuth|@login_required/i},{name:"add_input_sanitization",regex:/escape|sanitize|htmlspecialchars|DOMPurify/i},{name:"add_test_case",regex:/def test_|it\(|describe\(|expect\(|assert|@pytest/i},{name:"add_mock",regex:/Mock|patch|jest[.]mock|vi[.]mock|MagicMock/i},{name:"modify_imports",regex:/^[+-].*import|^[+-].*from.*import|^[+-].*require\(/m},{name:"add_async",regex:/async |await |Promise|asyncio|async def/i}];function $n(t){if(!kn(t))return"";try{let e=JSON.parse(Sn(t,"utf8")),s=Math.floor(Date.now()/1e3)-300;return(e.recentSkills||[]).filter(r=>r.timestamp>s).sort((r,i)=>i.timestamp-r.timestamp)[0]?.skillId||""}catch{return""}}function En(t){let e=[];for(let{name:n,regex:s}of xn)s.test(t)&&e.push(n);return e}function Cn(t,e,n,s){let o=f(),i={timestamp:new Date().toISOString(),skill_id:t,file_path:e,session_id:o,patterns:n};try{bn(x("path").dirname(s),{recursive:!0}),_n(s,JSON.stringify(i)+`
`)}catch{}}function bt(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return c();let n=p(t,"tool_input.file_path")||"";if(!n)return c();let s=g(),o=`${s}/.claude/session/state.json`,r=$n(o);if(!r)return c();let i="";if(e==="Edit"){let a=p(t,"tool_input.old_string")||"",d=p(t,"tool_input.new_string")||"";if(a&&d){let y=a.split(`
`),k=d.split(`
`);i=y.map(h=>`-${h}`).join(`
`)+`
`+k.map(h=>`+${h}`).join(`
`)}}else i=p(t,"tool_input.content")||"";if(!i)return c();let l=En(i);if(l.length>0){let a=`${s}/.claude/feedback/edit-patterns.jsonl`;Cn(r,n,l,a),process.env.CLAUDE_HOOK_DEBUG&&u("skill-edit-tracker",`Detected ${l.length} patterns for ${r}: ${JSON.stringify(l)}`)}return c()}import{existsSync as Ct,readFileSync as vn,writeFileSync as In,mkdirSync as wn}from"node:fs";import{createHash as Rn}from"node:crypto";var xt=500;var $t=15,Et=3;function vt(){return`${g()}/.claude/feedback/calibration-data.json`}function Tn(){let t=`${g()}/.claude/feedback`;if(!Ct(t))try{wn(t,{recursive:!0})}catch{}}function An(){let t=vt();if(Ct(t))try{return JSON.parse(vn(t,"utf8"))}catch{u("calibration-engine","Failed to load calibration data, using defaults")}return{schemaVersion:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),records:[],adjustments:[],stats:{totalDispatches:0,successRate:0,avgConfidence:0,topAgents:[]}}}function Dn(t){Tn();let e=vt();t.updatedAt=new Date().toISOString();try{In(e,JSON.stringify(t,null,2)),u("calibration-engine","Saved calibration data")}catch(n){u("calibration-engine",`Failed to save calibration data: ${n}`)}}function On(t){return Rn("sha256").update(t.toLowerCase().trim()).digest("hex").slice(0,16)}function It(t,e,n,s,o,r,i){let l=An(),a={timestamp:new Date().toISOString(),sessionId:f(),agent:e,promptHash:On(t),matchedKeywords:n,dispatchConfidence:s,outcome:o,durationMs:r,feedback:i};l.records.push(a),l.records.length>xt&&(l.records=l.records.slice(-xt)),jn(l,a),Nn(l),Dn(l),u("calibration-engine",`Recorded outcome: ${e} -> ${o} (conf: ${s})`)}function jn(t,e){let n=e.outcome==="success",s=e.outcome==="failure"||e.outcome==="rejected";if(!n&&!s)return;let o=n?Et:-Et;for(let r of e.matchedKeywords){let i=t.adjustments.find(l=>l.keyword===r&&l.agent===e.agent);i?(i.adjustment=Math.max(-$t,Math.min($t,i.adjustment+o)),i.sampleCount++,i.lastUpdated=new Date().toISOString()):t.adjustments.push({keyword:r,agent:e.agent,adjustment:o,sampleCount:1,lastUpdated:new Date().toISOString()})}}function Nn(t){let e=t.records;if(e.length===0)return;t.stats.totalDispatches=e.length;let n=e.filter(r=>r.outcome==="success").length;t.stats.successRate=n/e.length;let s=e.reduce((r,i)=>r+i.dispatchConfidence,0)/e.length;t.stats.avgConfidence=Math.round(s);let o=new Map;for(let r of e){let i=o.get(r.agent)||{count:0,success:0};i.count++,r.outcome==="success"&&i.success++,o.set(r.agent,i)}t.stats.topAgents=Array.from(o.entries()).map(([r,i])=>({agent:r,count:i.count,successRate:i.success/i.count})).sort((r,i)=>i.count-r.count).slice(0,10)}import{existsSync as Hn,readFileSync as Pn,writeFileSync as Or,mkdirSync as jr}from"node:fs";function Mn(){let t=f();return`${g()}/.claude/orchestration/task-registry-${t}.json`}function Fn(){let t=Mn();if(Hn(t))try{return JSON.parse(Pn(t,"utf8"))}catch{}return{schemaVersion:"1.0.0",sessionId:f(),tasks:[],pipelines:[],updatedAt:new Date().toISOString()}}function wt(t){return Fn().tasks.find(n=>n.taskId===t)}import{existsSync as Tt,readFileSync as At,writeFileSync as Mr,mkdirSync as Fr}from"node:fs";function Ln(){return`${g()}/.claude/orchestration`}function Un(){let t=f();return`${Ln()}/session-${t}.json`}function zn(){return`${g()}/.claude/orchestration/config.json`}function Bn(){let t=Un();if(Tt(t))try{let e=At(t,"utf8");return JSON.parse(e)}catch(e){u("orchestration-state",`Failed to load state: ${e}`)}return{sessionId:f(),activeAgents:[],injectedSkills:[],promptHistory:[],maxHistorySize:10,updatedAt:new Date().toISOString()}}function Dt(){return Bn().lastClassification}var Rt={enableAutoDispatch:!0,enableSkillInjection:!0,maxSkillInjectionTokens:800,enableCalibration:!0,enablePipelines:!0,maxRetries:3,retryDelayBaseMs:1e3};function Ot(){let t=zn();if(Tt(t))try{let e=At(t,"utf8");return{...Rt,...JSON.parse(e)}}catch{}return Rt}function Jn(t){let e=t.tool_input||{};return typeof e.taskId=="string"?e.taskId:null}function Wn(t){return t.tool_name!=="TaskUpdate"?!1:typeof(t.tool_input||{}).status=="string"}function qn(t){switch(t){case"completed":return"success";case"pending":return null;default:return null}}function jt(t){if(!Wn(t))return c();if(!Ot().enableCalibration)return c();let n=t.tool_input||{},s=Jn(t),o=n.status;if(!s)return c();let r=qn(o);if(!r)return c();u("calibration-tracker",`Tracking task ${s} status update to ${o}`);let i=wt(s);if(!i)return u("calibration-tracker",`Task ${s} not found in registry`),c();let l=i.agent;if(!l)return u("calibration-tracker",`No agent associated with task ${s}`),c();let d=Dt()?.agents.find($=>$.agent===l),y=d?.matchedKeywords||[],k=i.confidence||d?.confidence||0,h=i.createdAt?Date.now()-new Date(i.createdAt).getTime():void 0;return It("",l,y,k,r,h),u("calibration-tracker",`Recorded calibration: ${l} -> ${r} (conf: ${k})`),c()}import{existsSync as Ht,readFileSync as Pt,writeFileSync as Gn,mkdirSync as Zn}from"node:fs";var Kn=["py","ts","tsx","js","jsx","go","rs","java"];function Xn(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"go":return"go";case"rs":return"rust";case"java":return"java";default:return null}}function Vn(t){let e=0,n=0,s=0;for(let o of t.split(`
`))o.startsWith("	")?e++:o.startsWith("    ")?s++:o.match(/^  [^ ]/)&&n++;return e>n+s?{style:"tabs",size:1}:n>s?{style:"spaces",size:2}:s>0?{style:"spaces",size:4}:{style:"unknown",size:4}}function Yn(t){let e=(t.match(/'/g)||[]).length,n=(t.match(/"/g)||[]).length;return e>n?"single":"double"}function Qn(t){let e=0,n=0;for(let s of t.split(`
`)){let o=s.trim();!o||o.startsWith("//")||o.startsWith("*")||(/;\s*$/.test(s)?e++:/[a-zA-Z0-9\)\]\'\"]\\s*$/.test(s)&&n++)}return e>n?"always":"omit"}function Nt(t){return(t.match(/,\s*$/gm)||[]).length>5?"always":"minimal"}function ts(t){let e=/\) -> |: [A-Z][a-zA-Z]+(\[|$| =)/.test(t),n="unknown";return/"""[^"]+"""/.test(t)&&(/:param |:returns:|:raises:/.test(t)?n="sphinx":/Args:|Returns:|Raises:/.test(t)?n="google":/Parameters|Returns\n-+/.test(t)?n="numpy":n="simple"),{typeHints:e,docstringStyle:n}}function es(t){if(Ht(t))try{return JSON.parse(Pt(t,"utf8"))}catch{}return{version:"1.0.0",last_updated:null,samples_count:0,languages:{},global_preferences:{indentation:{style:"unknown",size:4,confidence:0},quotes:{style:"unknown",confidence:0}}}}function ns(t,e,n,s,o,r,i,l){t.last_updated=new Date().toISOString(),t.samples_count++,t.languages[e]||(t.languages[e]={samples:0,indentation:{tabs:0,spaces_2:0,spaces_4:0},quotes:{single:0,double:0},semicolons:{always:0,omit:0},trailing_comma:{always:0,minimal:0},type_hints:{used:0,not_used:0},docstring_style:{}});let a=t.languages[e];a.samples++,n.style==="tabs"?a.indentation.tabs++:n.size===2?a.indentation.spaces_2++:a.indentation.spaces_4++,s==="single"?a.quotes.single++:a.quotes.double++,o!=="unknown"&&(o==="always"?a.semicolons.always++:a.semicolons.omit++),r!=="unknown"&&(r==="always"?a.trailing_comma.always++:a.trailing_comma.minimal++),i!==null&&(i?a.type_hints.used++:a.type_hints.not_used++),l!=="unknown"&&(a.docstring_style[l]=(a.docstring_style[l]||0)+1)}function Mt(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return c();let n=p(t,"tool_input.file_path")||"";if(!n||n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock"))return c();let s=n.split(".").pop()?.toLowerCase()||"";if(!Kn.includes(s))return c();let o=Xn(n);if(!o)return c();let r=p(t,"tool_input.content")||"";if(!r){let m=g(),S=n.startsWith("/")?n:`${m}/${n}`;if(Ht(S))try{r=Pt(S,"utf8").split(`
`).slice(0,100).join(`
`)}catch{return c()}}if(!r)return c();let i=Vn(r),l=Yn(r),a="unknown",d="unknown",y=null,k="unknown";switch(o){case"javascript":case"typescript":a=Qn(r),d=Nt(r);break;case"python":{let m=ts(r);y=m.typeHints,k=m.docstringStyle,d=Nt(r);break}}let h=g(),$=`${h}/.claude/feedback/code-style-profile.json`;try{Zn(`${h}/.claude/feedback`,{recursive:!0});let m=es($);ns(m,o,i,l,a,d,y,k),Gn($,JSON.stringify(m,null,2))}catch(m){u("code-style-learner",`Error updating profile: ${m}`)}return u("code-style-learner",`Analyzed ${o} file: indent=${i.style}(${i.size}) quotes=${l}`),c()}import{appendFileSync as Ft,mkdirSync as ss}from"node:fs";import{execSync as os}from"node:child_process";function Lt(t){if((t.tool_name||"")!=="Write")return c();let n=p(t,"tool_input.file_path")||process.env.TOOL_OUTPUT_FILE_PATH||"";if(!n)return c();if(n.includes("test")||n.includes("spec")||n.includes("__tests__"))return c();if(!/\.(py|ts|tsx|js|jsx)$/.test(n))return c();let s=g(),o="",r=n.split("/").pop()||"";if(n.endsWith(".py"))o=`test_${r.replace(".py","")}.py`;else if(/\.(ts|tsx|js|jsx)$/.test(n))o=`${r.replace(/\.[^.]+$/,"")}.test.*`;else return c();let i="";try{i=os(`find "${s}" -type f -name "${o}" 2>/dev/null | head -1`,{encoding:"utf8",timeout:5e3}).trim()}catch{}let l=`${s}/.claude/hooks/logs`;try{ss(l,{recursive:!0});let a=new Date().toISOString();if(i)Ft(`${l}/coverage-predictor.log`,`[${a}] COVERAGE_OK: ${n} has tests at ${i}
`);else return Ft(`${l}/coverage-predictor.log`,`[${a}] COVERAGE_WARN: ${n} may lack test coverage (expected: ${o})
`),{continue:!0,systemMessage:`Consider adding tests for: ${n}`}}catch{}return c()}import{existsSync as Ut,readFileSync as zt,writeFileSync as rs,mkdirSync as is}from"node:fs";var cs=["py","ts","tsx","js","jsx","go","rs","java"];function as(t){return t.length<2||/^[_0-9]+$/.test(t)?"unknown":/^[A-Z][A-Z0-9_]*$/.test(t)?"SCREAMING_SNAKE_CASE":/^[A-Z][a-zA-Z0-9]*$/.test(t)?"PascalCase":/^[a-z][a-zA-Z0-9]*$/.test(t)&&!t.includes("_")?"camelCase":/^[a-z][a-z0-9_]*$/.test(t)?"snake_case":/^_[a-z][a-z0-9_]*$/.test(t)?"private_snake_case":/^__[a-z][a-z0-9_]*__$/.test(t)?"dunder":"mixed"}function us(t){let e=(t.match(/def ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(r=>r.replace("def ","")),n=(t.match(/class ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(r=>r.replace("class ","")),s=(t.match(/^\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*=/gm)||[]).map(r=>r.replace(/\s*=.*/,"").trim()),o=(t.match(/^([A-Z][A-Z0-9_]*)\s*=/gm)||[]).map(r=>r.replace(/\s*=.*/,"").trim());return{functions:e,classes:n,variables:s,constants:o}}function ls(t){let e=[...(t.match(/(function|async function) ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace(/(async )?function /,"")),...(t.match(/const ([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*\(/g)||[]).map(i=>i.replace(/const /,"").replace(/\s*=.*/,""))],n=(t.match(/class ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("class ","")),s=(t.match(/interface ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("interface ","")),o=(t.match(/type ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("type ","")),r=(t.match(/(const|let|var) ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace(/(const|let|var) /,""));return{functions:e,classes:n,variables:r,interfaces:s,types:o}}function b(t){let e={camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0};for(let n of t){if(!n)continue;let s=as(n);e[s]++}return e}function ds(t){let n=(t.split("/").pop()||"").replace(/\.[^.]+$/,"");return/^[a-z][a-z0-9_]*$/.test(n)?"snake_case":/^[a-z][a-z0-9-]*$/.test(n)?"kebab-case":/^[A-Z][a-zA-Z0-9]*$/.test(n)?"PascalCase":/^[a-z][a-zA-Z0-9]*$/.test(n)?"camelCase":"mixed"}function ps(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"go":return"go";case"rs":return"rust";case"java":return"java";default:return null}}function gs(t){if(Ut(t))try{return JSON.parse(zt(t,"utf8"))}catch{}return{version:"1.0.0",last_updated:null,samples_count:0,languages:{},file_naming:{},detected_patterns:{functions:{},classes:{},variables:{},constants:{},types:{}}}}function ms(){return{samples:0,functions:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},classes:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},variables:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},constants:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},types:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0}}}function Bt(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return c();let n=p(t,"tool_input.file_path")||"";if(!n||n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock"))return c();let s=n.split(".").pop()?.toLowerCase()||"";if(!cs.includes(s))return c();let o=ps(n);if(!o)return c();let r=p(t,"tool_input.content")||"";if(!r){let m=g(),S=n.startsWith("/")?n:`${m}/${n}`;if(Ut(S))try{r=zt(S,"utf8").split(`
`).slice(0,150).join(`
`)}catch{return c()}}if(!r)return c();let i=ds(n),l=b([]),a=b([]),d=b([]),y=b([]),k=b([]);switch(o){case"python":{let m=us(r);l=b(m.functions),a=b(m.classes),d=b(m.variables),y=b(m.constants);break}case"typescript":case"javascript":{let m=ls(r);l=b(m.functions),a=b(m.classes),d=b(m.variables),k=b([...m.interfaces,...m.types]);break}}let h=g(),$=`${h}/.claude/feedback/naming-conventions.json`;try{is(`${h}/.claude/feedback`,{recursive:!0});let m=gs($);m.last_updated=new Date().toISOString(),m.samples_count++,m.file_naming[i]=(m.file_naming[i]||0)+1,m.languages[o]||(m.languages[o]=ms());let S=m.languages[o];S.samples++;for(let _ of Object.keys(l))S.functions[_]=(S.functions[_]||0)+l[_],S.classes[_]=(S.classes[_]||0)+a[_],S.variables[_]=(S.variables[_]||0)+d[_],S.constants[_]=(S.constants[_]||0)+y[_],S.types[_]=(S.types[_]||0)+k[_];rs($,JSON.stringify(m,null,2))}catch(m){u("naming-convention-learner",`Error updating profile: ${m}`)}return u("naming-convention-learner",`Analyzed ${o} file (${n}): file=${i}`),c()}import{existsSync as U,statSync as fs,appendFileSync as ys,mkdirSync as hs}from"node:fs";function ks(t,e){let n=t.split("/").pop()||"",s=t.split("/").slice(0,-1).join("/"),o=(t.split(".").pop()||"").toLowerCase();switch(n){case"package.json":if(U(`${e}/${t}`))try{let r=x(`${e}/${t}`);if(Object.keys(r.scripts||{}).length>5)return{changeType:"scripts",readmeSection:"Available Scripts",suggestion:"Update README with new npm scripts"}}catch{}break;case"pyproject.toml":case"setup.py":case"setup.cfg":return{changeType:"python-config",readmeSection:"Installation",suggestion:"Verify README installation instructions match project config"};case"Dockerfile":case"docker-compose.yml":case"docker-compose.yaml":return{changeType:"docker",readmeSection:"Docker / Deployment",suggestion:"Update README Docker instructions"};case".env.example":case".env.template":return{changeType:"env",readmeSection:"Environment Variables",suggestion:"Update README environment variable documentation"}}if(t.includes("/api/")||t.includes("/routes/")||t.includes("/endpoints/"))return{changeType:"api",readmeSection:"API Endpoints",suggestion:"Update README API documentation or OpenAPI spec"};if(s.includes("/config")||s.includes("/settings"))return{changeType:"config",readmeSection:"Configuration",suggestion:"Document new configuration options in README"};if(["index.ts","index.js","main.py","app.py","__init__.py"].includes(n)&&t.split("/").length<=4)return{changeType:"entry-point",readmeSection:"Getting Started",suggestion:"Review README getting started section for accuracy"};if((t.includes("/bin/")||t.includes("/cli/")||t.includes("/scripts/"))&&["sh","py","ts"].includes(o))return{changeType:"cli",readmeSection:"CLI / Commands",suggestion:"Update README CLI usage documentation"};if(n==="index.ts"||n==="index.js"){let r=`${e}/${t}`;if(U(r))try{let{readFileSync:i}=x("fs");if((i(r,"utf8").match(/^export/gm)||[]).length>5)return{changeType:"exports",readmeSection:"API Reference",suggestion:"Consider updating API reference with new exports"}}catch{}}return null}function Ss(t){for(let e of["README.md","Readme.md","readme.md","README.rst","README"])if(U(`${t}/${e}`))return`${t}/${e}`;return null}function Jt(t){if((t.tool_name||"")!=="Write")return c();let n=p(t,"tool_input.file_path")||"";if(!n)return c();if(n.includes("/.claude/")||n.includes("/node_modules/")||n.includes("/.git/")||n.includes("/dist/")||n.endsWith(".lock")||n.endsWith(".log"))return c();if(n.includes("test")||n.includes("spec")||n.includes("__tests__"))return c();let s=g(),o=ks(n,s);if(!o)return c();let r=Ss(s),i;if(r){let a=0;try{let k=fs(r).mtime.getTime(),h=Date.now();a=Math.floor((h-k)/(86400*1e3))}catch{}let d=o.suggestion;a>30&&(d=`${d} (README last updated ${a}+ days ago)`),i=`README sync: ${o.changeType} change in ${n.split("/").pop()}. Section: '${o.readmeSection}'. ${d}`}else i=`README sync: ${o.changeType} change detected but no README.md found. Consider creating one.`;i.length>200&&(i=`README sync: ${o.changeType} change detected. Consider updating '${o.readmeSection}' section.`);let l=`${s}/.claude/hooks/logs`;try{hs(l,{recursive:!0});let a=new Date().toISOString();ys(`${l}/readme-sync.log`,`[${a}] README_SYNC: ${o.changeType} change in ${n} -> ${o.readmeSection}
`)}catch{}return u("readme-sync",`README_SYNC: ${o.changeType} change suggests README update`),{continue:!0,hookSpecificOutput:{additionalContext:i}}}import{existsSync as _s}from"node:fs";function Wt(t){let n=`${g()}/.claude/coordination/lib/coordination.sh`;return _s(n)?c():c()}import{existsSync as bs,readFileSync as xs,writeFileSync as qt,mkdirSync as $s}from"node:fs";import{execSync as E}from"node:child_process";function Es(t){let e=t.match(/^(issue|fix|feature|bug|feat)\/(\d+)/);return e?e[2]:(e=t.match(/^(\d+)-/),e?e[1]:null)}function Cs(t){let e=t.match(/#(\d+)/);return e?e[1]:(e=t.match(/(fix|fixes|close|closes|resolve|resolves)\s+#?(\d+)/i),e?e[2]:null)}function vs(){try{return E("git branch --show-current 2>/dev/null || git rev-parse --abbrev-ref HEAD 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()}catch{return""}}function Is(){try{let t=E("git rev-parse --short HEAD 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),e=E("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),n=E("git log -1 --pretty=%cI 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()||new Date().toISOString();return{sha:t,message:e,timestamp:n}}catch{return null}}function ws(t,e){if(!bs(t))try{$s(x("path").dirname(t),{recursive:!0}),qt(t,JSON.stringify({session_id:e,issues:{}}))}catch{}}function Rs(t,e,n,s,o){ws(s,o);try{let r=JSON.parse(xs(s,"utf8"));return r.issues[t]||(r.issues[t]={commits:[],tasks_completed:[],pr_url:null,branch:n}),r.issues[t].commits.push(e),r.issues[t].branch=n,qt(s,JSON.stringify(r,null,2)),u("issue-progress-commenter",`Queued commit for issue #${t}`),!0}catch{return u("issue-progress-commenter",`Error queuing commit for issue #${t}`),!1}}function Gt(t){if((t.tool_name||"")!=="Bash")return c();let n=p(t,"tool_input.command")||"",s=t.exit_code??0;if(!/git\s+commit/i.test(n)||s!==0)return c();u("issue-progress-commenter","Processing git commit command...");try{E("which gh",{stdio:"ignore",timeout:2e3})}catch{return u("issue-progress-commenter","gh CLI not available, skipping issue progress tracking"),c()}try{if(!E("git remote get-url origin 2>/dev/null",{encoding:"utf8",timeout:5e3}).includes("github"))return u("issue-progress-commenter","Not a GitHub repository, skipping"),c()}catch{return c()}let o=vs();if(!o)return u("issue-progress-commenter","Could not determine current branch"),c();let r=Es(o);if(!r)try{let d=E("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim();r=Cs(d)}catch{}if(!r)return u("issue-progress-commenter",`No issue number found in branch '${o}' or commit message`),c();u("issue-progress-commenter",`Found issue #${r}`);try{E(`gh issue view ${r} --json number`,{stdio:"ignore",timeout:5e3})}catch{return u("issue-progress-commenter",`Issue #${r} not found or not accessible`),c()}let i=Is();if(!i)return u("issue-progress-commenter","Could not get commit info"),c();let l=(t.session_id||f()).replace(/[^a-zA-Z0-9_-]/g,""),a=`/tmp/claude-session-${l}/issue-progress.json`;return Rs(r,i,o,a,l),c()}import{existsSync as Ts,readFileSync as As,writeFileSync as Ds}from"node:fs";import{execSync as C}from"node:child_process";function Os(t){let e=t.replace(/^[a-z]+(\([^)]*\))?:\s*/i,"");return e=e.replace(/\(#\d+\)/g,""),e.trim()}function Zt(t){return t.toLowerCase().replace(/\s+/g," ").trim()}function js(t,e){let n=Zt(t),s=Zt(e);if(n===s||n.includes(s)||s.includes(n))return!0;let o=new Set(n.split(" ").filter(l=>l.length>=3)),r=s.split(" ").filter(l=>l.length>=3),i=0;for(let l of r)o.has(l)&&i++;return i>=2}function Ns(t){let e=t.match(/^(issue|fix|feature|bug|feat)\/(\d+)/);return e?e[2]:(e=t.match(/^(\d+)-/),e?e[1]:null)}function Hs(t){let e=t.match(/#(\d+)/);return e?e[1]:null}function Ps(t){try{let n=C(`gh issue view ${t} --json body -q '.body' 2>/dev/null`,{encoding:"utf8",timeout:1e4}).split(`
`),s=[];for(let o of n){let r=o.match(/^\s*-\s*\[\s*\]\s+(.+)/);r&&s.push(r[1].trim())}return s}catch{return[]}}function Ms(t,e){u("issue-subtask-updater",`Attempting to update checkbox: '${e}' in issue #${t}`);try{let n=C(`gh issue view ${t} --json body -q '.body' 2>/dev/null`,{encoding:"utf8",timeout:1e4}),s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=n.replace(new RegExp(`(^\\s*-\\s*)\\[\\s*\\](\\s+${s})`,"m"),"$1[x]$2");if(n===o)return u("issue-subtask-updater",`No change needed for checkbox: '${e}'`),!1;let r=C("gh repo view --json nameWithOwner -q '.nameWithOwner' 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),i=JSON.stringify(o);return C(`gh api -X PATCH "repos/${r}/issues/${t}" -f body=${i}`,{stdio:"ignore",timeout:1e4}),u("issue-subtask-updater",`Successfully updated checkbox: '${e}'`),!0}catch(n){return u("issue-subtask-updater",`Failed to update issue body: ${n}`),!1}}function Fs(t,e,n){if(Ts(n))try{let s=JSON.parse(As(n,"utf8"));s.issues[t]||(s.issues[t]={commits:[],tasks_completed:[],pr_url:null}),s.issues[t].tasks_completed.includes(e)||(s.issues[t].tasks_completed.push(e),Ds(n,JSON.stringify(s,null,2)))}catch{}}function Kt(t){if((t.tool_name||"")!=="Bash")return c();let n=p(t,"tool_input.command")||"",s=t.exit_code??0;if(!/git\s+commit/i.test(n)||s!==0)return c();u("issue-subtask-updater","Processing git commit for subtask updates...");try{C("which gh",{stdio:"ignore",timeout:2e3})}catch{return u("issue-subtask-updater","gh CLI not available, skipping subtask updates"),c()}try{if(!C("git remote get-url origin 2>/dev/null",{encoding:"utf8",timeout:5e3}).includes("github"))return u("issue-subtask-updater","Not a GitHub repository, skipping"),c()}catch{return c()}let o="",r="";try{o=C("git branch --show-current 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),r=C("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()}catch{return c()}let i=Ns(o);if(i||(i=Hs(r)),!i)return u("issue-subtask-updater","No issue number found"),c();u("issue-subtask-updater",`Found issue #${i}, checking for matching subtasks...`);let l=Os(r);if(!l)return u("issue-subtask-updater","Could not extract task from commit message"),c();u("issue-subtask-updater",`Commit task: '${l}'`);let a=Ps(i);if(a.length===0)return u("issue-subtask-updater",`No unchecked tasks in issue #${i}`),c();let d=!1,k=`/tmp/claude-session-${(t.session_id||f()).replace(/[^a-zA-Z0-9_-]/g,"")}/issue-progress.json`;for(let h of a)js(l,h)&&(u("issue-subtask-updater",`Found matching checkbox: '${h}'`),Ms(i,h)&&(Fs(i,h,k),d=!0));return d?{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"PostToolUse",additionalContext:`Issue #${i}: Automatically marked sub-task as complete based on commit.`}}:(u("issue-subtask-updater",`No matching checkboxes found for task: '${l}'`),c())}import{existsSync as Ls,readFileSync as Us,writeFileSync as Xt,mkdirSync as zs}from"node:fs";var Bs={JWT:/jwt|jsonwebtoken/i,OAuth2:/oauth|oauth2/i,PostgreSQL:/postgres|postgresql|psql/i,Redis:/redis/i,React:/react/i,FastAPI:/fastapi/i,SQLAlchemy:/sqlalchemy/i,Alembic:/alembic/i,"cursor-pagination":/cursor.based|keyset/i,"offset-pagination":/offset.pagination/i,WebSocket:/websocket/i,SSE:/sse|server.sent/i,GraphQL:/graphql/i,REST:/rest.api|restful/i},Js={feature:/^feat:|^feature:/i,bugfix:/^fix:|^bugfix:/i,refactor:/^refactor:/i,optimization:/^perf:|^performance:/i,security:/^security:|^sec:/i,testing:/^test:|^tests:/i},Ws={pagination:/cursor|pagination|offset|limit|page/i,caching:/cache|redis|memcache|ttl/i,authentication:/auth|jwt|oauth|token|login/i,validation:/validate|validation|schema|pydantic|zod/i,testing:/test|spec|coverage|mock/i,security:/security|encrypt|hash|secret|credential/i,performance:/performance|optimize|cache|index/i,error_handling:/error|exception|retry|fallback/i};function qs(){return g().split("/").pop()||"unknown"}function Gs(t){let e=t.toLowerCase(),n="unknown",s="general";for(let[o,r]of Object.entries(Bs))if(r.test(e)){n=o;break}for(let[o,r]of Object.entries(Js))if(r.test(t)){s=o;break}return{tech:n,pattern:s}}function Zs(t){for(let[e,n]of Object.entries(Ws))if(n.test(t))return e;return"general"}function N(t,e,n,s,o){let r=new Date().toISOString(),i=qs();if(!Ls(o))try{zs(x("path").dirname(o),{recursive:!0}),Xt(o,JSON.stringify({patterns:[]}))}catch{return}try{let l=JSON.parse(Us(o,"utf8"));l.patterns.push({text:t,category:e,outcome:n,source:s,timestamp:r,project:i}),Xt(o,JSON.stringify(l,null,2)),u("pattern-extractor",`Queued pattern: category=${e} outcome=${n} source=${s}`)}catch{}}function Ks(t,e,n){let s="",o=t.match(/-m\s+["']([^"']+)["']/)||t.match(/-m\s+([^\s]+)/);if(o&&(s=o[1]),!s)return;let{tech:r,pattern:i}=Gs(s),l=Zs(s),a=e===0?"success":"failed",d=s;r!=="unknown"&&(d=`[${r}] ${s}`),N(d,l,a,"commit",n)}function Xs(t,e,n){if(e!==0)return;let s="PR merged successfully",o=t.match(/gh\s+pr\s+merge\s+(\d+)/);o&&(s=`PR #${o[1]} merged`),N(s,"decision","success","pr-merge",n)}function Vs(t,e,n){let s="unknown";/pytest|py\.test/.test(t)?s="pytest":/jest/.test(t)?s="jest":/vitest/.test(t)?s="vitest":/npm\s+test|yarn\s+test|bun\s+test/.test(t)?s="npm-test":/go\s+test/.test(t)&&(s="go-test");let o=e===0?"success":"failed",r=`Tests ${o==="success"?"passed":"failed"} (${s})`;N(r,"testing",o,"test-run",n)}function Ys(t,e,n){let s="unknown";/npm\s+run\s+build/.test(t)?s="npm":/yarn\s+build/.test(t)?s="yarn":/cargo\s+build/.test(t)?s="cargo":/make/.test(t)?s="make":/docker\s+build/.test(t)&&(s="docker");let o=e===0?"success":"failed",r=`Build ${o==="success"?"succeeded":"failed"} (${s})`;N(r,"build",o,"build",n)}function Vt(t){if((t.tool_name||"")!=="Bash")return c();let n=p(t,"tool_input.command")||"",s=t.exit_code??0;if(!n)return c();let o=n.toLowerCase(),i=`${g()}/.claude/feedback/patterns-queue.json`;return/git\s+commit/.test(o)?Ks(n,s,i):/gh\s+pr\s+merge/.test(o)?Xs(n,s,i):/pytest|jest|vitest|npm\s+test|yarn\s+test|bun\s+test|go\s+test/.test(o)?Vs(n,s,i):/npm\s+run\s+build|yarn\s+build|cargo\s+build|make|docker\s+build/.test(o)&&Ys(n,s,i),c()}import{existsSync as Qs,readFileSync as to,writeFileSync as Yt,mkdirSync as eo}from"node:fs";var no={"api-design-framework|fastapi-advanced":"Both relate to API design. Consider using api-design-framework for patterns, fastapi-advanced for implementation.","sqlalchemy-2-async|database-schema-designer":"Both relate to database. Use database-schema-designer for schema design, sqlalchemy-2-async for async patterns.","caching-strategies|performance-optimization":"Both optimize performance. Consider consolidating caching queries.","auth-patterns|owasp-top-10":"Both relate to security. auth-patterns for implementation, owasp-top-10 for validation.","asyncio-advanced|connection-pooling":"Both relate to async. asyncio-advanced for patterns, connection-pooling for specific optimization."};function so(t){if(!Qs(t))try{eo(x("path").dirname(t),{recursive:!0}),Yt(t,JSON.stringify({version:"1.0",skills:{},sessions:{},last_updated:""}))}catch{}}function H(t){so(t);try{return JSON.parse(to(t,"utf8"))}catch{return{version:"1.0",skills:{},sessions:{},last_updated:""}}}function oo(t,e,n){let s=H(n),o=new Date().toISOString();s.skills[t]=(s.skills[t]||0)+1,s.sessions[e]||(s.sessions[e]=[]),s.sessions[e].includes(t)||s.sessions[e].push(t),s.last_updated=o;try{Yt(n,JSON.stringify(s,null,2)),u("skill-usage-optimizer",`Updated usage for skill: ${t} (session: ${e})`)}catch{}}function ro(t,e){return H(e).sessions[t]||[]}function io(t,e){for(let[n,s]of Object.entries(no)){let[o,r]=n.split("|");if(t===o||t===r){let i=t===o?r:o;if(e.includes(i))return u("skill-usage-optimizer",`Overlap detected: ${o} + ${r}`),s}}return null}function co(t){let e=H(t),n=Object.entries(e.skills);return n.length===0?"":n.sort((s,o)=>o[1]-s[1]).slice(0,3).map(([s,o])=>`${s}:${o}`).join(", ")}function Qt(t){let e=t.tool_name||"",n=p(t,"tool_input.skill")||p(t,"tool_name")||"";if(e!=="Skill"&&!n?.startsWith("skills/")&&!n)return c();if(!n)return c();let o=`${g()}/.claude/feedback/skill-usage.json`,r=f();oo(n,r,o);let i=ro(r,o),l=io(n,i),a=co(o),d="";l&&(d=`Skill overlap: ${l}`,u("skill-usage-optimizer",`Suggesting consolidation for: ${n}`));let k=H(o).skills[n]||0;return k>0&&k%5===0&&a&&(d?d=`${d} | Top skills: ${a}`:d=`Top skills this project: ${a}`),d?(d.length>200&&(d=d.substring(0,197)+"..."),{continue:!0,hookSpecificOutput:{additionalContext:d}}):c()}import{existsSync as z,readFileSync as ao}from"node:fs";import{execSync as te}from"node:child_process";function uo(){try{te("which sqlite3",{stdio:"ignore",timeout:2e3});let e=`${g()}/.claude/coordination/.claude.db`;return z(e)}catch{return!1}}function lo(t,e){let s=`${g()}/.claude/coordination/.claude.db`;if(!z(s))return!1;try{let o=t.replace(/'/g,"''"),r=e.replace(/'/g,"''");return te(`sqlite3 "${s}" "DELETE FROM file_locks WHERE file_path = '${o}' AND instance_id = '${r}';"`,{stdio:"ignore",timeout:5e3}),u("file-lock-release",`Released lock for ${t}`),!0}catch(o){return u("file-lock-release",`Failed to release lock for ${t}: ${o}`),!1}}function po(){if(process.env.INSTANCE_ID)return process.env.INSTANCE_ID;let e=`${g()}/.claude/.instance_env`;if(z(e))try{let s=ao(e,"utf8").match(/CLAUDE_INSTANCE_ID=["']?([^"'\n]+)/);if(s)return s[1]}catch{}return f()}function ee(t){let e=t.tool_name||"";if(e!=="Write"&&e!=="Edit")return c();if(!uo())return c();let n=p(t,"tool_input.file_path")||"";if(!n)return c();if(n.includes("/.claude/coordination/"))return c();let s=String(p(t,"tool_result")||"");if(s.includes("error")||s.includes("Error"))return c();let o=po();return lo(n,o),c()}var ne={"posttool/audit-logger":X,"posttool/auto-lint":V,"posttool/context-budget-monitor":nt,"posttool/coordination-heartbeat":ot,"posttool/error-collector":ct,"posttool/error-solution-suggester":ut,"posttool/error-tracker":lt,"posttool/mem0-webhook-handler":dt,"posttool/memory-bridge":pt,"posttool/realtime-sync":St,"posttool/session-metrics":_t,"posttool/skill-edit-tracker":bt,"posttool/calibration-tracker":jt,"posttool/write/code-style-learner":Mt,"posttool/write/coverage-predictor":Lt,"posttool/write/naming-convention-learner":Bt,"posttool/write/readme-sync":Jt,"posttool/write/release-lock-on-commit":Wt,"posttool/bash/issue-progress-commenter":Gt,"posttool/bash/issue-subtask-updater":Kt,"posttool/bash/pattern-extractor":Vt,"posttool/skill/skill-usage-optimizer":Qt,"posttool/write-edit/file-lock-release":ee};function Yi(t){return ne[t]}function Qi(){return Object.keys(ne)}export{Ao as escapeRegex,de as extractIssueNumber,ae as getCurrentBranch,Mo as getDefaultBranch,p as getField,le as getGitStatus,Yi as getHook,W as getLogDir,R as getPluginRoot,g as getProjectDir,No as getRepoRoot,f as getSessionId,Po as hasUncommittedChanges,ne as hooks,mo as isBashInput,yo as isEditInput,Ho as isGitRepo,ue as isProtectedBranch,ho as isReadInput,fo as isWriteInput,Qi as listHooks,u as logHook,wo as logPermissionFeedback,To as normalizeCommand,Eo as outputAllowWithContext,bo as outputBlock,Io as outputDeny,Co as outputError,$o as outputPromptContext,_o as outputSilentAllow,c as outputSilentSuccess,vo as outputWarning,xo as outputWithContext,Ro as readHookInput,Fo as validateBranchName};
//# sourceMappingURL=posttool.mjs.map
